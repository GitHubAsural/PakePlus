import{n as J,bC as we,q as V,ag as z,o as g,j as K,d as h,aE as Q,e as k,t as L,c as T,aO as se,an as N,bD as Ce,ax as re,bE as ke,M as pe,aD as Se,E as Y,w as s,aF as ne,b as f,F as P,k as R,aQ as Te,aR as $e,r as w,G as Ie,Y as oe,a as D,ao as E,ar as W,u as Ve,bF as Ke}from"./index-08ed677d.js";import{C as F}from"./index-7b650976.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index-5362a68f.js";import{i as Ae}from"./index-c83262a0.js";import{l as ie,p as ue}from"./index-aea5eae0.js";import"./index-5353e7c4.js";import{R as ce,_ as de}from"./Group-db28a0f9.js";import"./vuedraggable.umd-a1c90dfc.js";import"./index-9d5a19c2.js";import"./createForOfIteratorHelper-a50550d1.js";import"./index-ffe2e608.js";import"./css-aae66f86.js";import"./useMaxLevel-5fff0ff6.js";import"./CaretDownOutlined-5ddc51ec.js";import"./CaretUpOutlined-d8859d1d.js";import"./iconUtil-c5959902.js";import"./RadioButton-b1164875.js";const Ne=J({name:"SelectTag",components:{CloseOutlined:we},props:{label:[String,Number],maxTagTextLength:Number,closable:Boolean},emits:["close"],setup(e,{emit:a}){return{text:V(()=>{if(e.label==null)return"";const n=String(e.label);return typeof e.maxTagTextLength=="number"&&n.length>e.maxTagTextLength?`${n.slice(0,e.maxTagTextLength)}...`:n}),close:()=>{a("close")}}}}),Oe=(e,a)=>{const o=e.__vccOpts||e;for(const[r,n]of a)o[r]=n;return o},Be=["title"],ze={class:"ele-select-tag-text"};function Le(e,a,o,r,n,v){const _=z("CloseOutlined");return g(),K("span",{class:"ele-select-tag",title:e.label==null?e.label:String(e.label)},[h("span",ze,[Q(e.$slots,"default",{},()=>[k(L(e.text),1)])]),e.closable?(g(),T(_,{key:0,class:"ele-select-tag-close",onClick:se(e.close,["stop"])},null,8,["onClick"])):N("",!0)],8,Be)}const Pe=Oe(Ne,[["render",Le]]),Re={value:[String,Number,Array],multiple:Boolean,disabled:Boolean,size:String,allowClear:Boolean,placeholder:String,id:String,selectedLabel:[String,Number],selected:Array,visible:{type:Boolean,required:!0},bordered:{type:Boolean,default:!0},maxTagCount:Number,maxTagTextLength:Number,arrowPointAtCenter:Boolean,autoAdjustOverflow:{type:Boolean,default:!0},overlayStyle:Object,overlayClassName:String,placement:{type:String,default:"top"}},De=J({name:"EleBasicSelect",components:{APopover:Ce,AInput:re,CloseCircleFilled:ke,DownOutlined:pe,SelectTag:Pe},props:Re,emits:["update:visible","clear","remove-tag"],setup(e,{emit:a}){const{authenticated:o}=Se(),r=V(()=>!o.value||e.disabled),n=V(()=>e.multiple?Array.isArray(e.value)&&e.value.length>0:e.value!=null&&e.value!==""),v=V(()=>e.allowClear&&!r.value&&n.value),_=V(()=>n.value?"":e.placeholder),m=V(()=>typeof e.maxTagCount=="number"&&e.selected!=null&&e.selected.length>e.maxTagCount),u=V(()=>!m.value||e.selected==null?e.selected:e.selected.slice(0,e.maxTagCount)),i=V(()=>!m.value||e.selected==null?[]:e.selected.slice(e.maxTagCount)),c=y=>{r.value||a("update:visible",y)},x=()=>{a("clear")},p=y=>{r.value||a("remove-tag",y)};return Y(()=>e.disabled,y=>{y&&e.visible&&a("update:visible",!1)},{immediate:!0}),{selectDisabled:r,hasValue:n,showClose:v,currentPlaceholder:_,collapse:m,currentSelected:u,collapsSelected:i,updateVisible:c,onClear:x,deleteTag:p}}}),Ue=(e,a)=>{const o=e.__vccOpts||e;for(const[r,n]of a)o[r]=n;return o},je={class:"ele-select-suffix"},Ee={key:0,class:"ele-select-tags"};function We(e,a,o,r,n,v){const _=z("CloseCircleFilled"),m=z("DownOutlined"),u=z("AInput"),i=z("SelectTag"),c=z("APopover");return g(),T(c,{trigger:"click",visible:e.visible,placement:e.placement,"overlay-style":e.overlayStyle,"overlay-class-name":e.overlayClassName,"arrow-point-at-center":e.arrowPointAtCenter,"auto-adjust-overflow":e.autoAdjustOverflow,"onUpdate:visible":e.updateVisible},{content:s(()=>[Q(e.$slots,"default")]),default:s(()=>[h("div",{class:ne(["ele-basic-select",{"ele-select-multiple":e.multiple}])},[f(u,{id:e.id,size:e.size,readonly:!0,bordered:e.bordered,value:e.selectedLabel,disabled:e.selectDisabled,placeholder:e.currentPlaceholder,class:ne({"ant-input-affix-wrapper-focused":e.visible})},{suffix:s(()=>[h("div",je,[e.showClose?(g(),T(_,{key:0,class:"ele-select-clear",onClick:se(e.onClear,["stop"])},null,8,["onClick"])):N("",!0),f(m,{class:"ele-select-arrow"})])]),_:1},8,["id","size","bordered","value","disabled","placeholder","class"]),e.multiple?(g(),K("div",Ee,[(g(!0),K(P,null,R(e.currentSelected,x=>(g(),T(i,{key:x.value,label:x.label,closable:!e.selectDisabled,"max-tag-text-length":e.maxTagTextLength,onClose:p=>e.deleteTag(x)},null,8,["label","closable","max-tag-text-length","onClose"]))),128)),e.collapse?(g(),T(i,{key:0},{default:s(()=>[Q(e.$slots,"maxTagPlaceholder",Te($e(e.collapsSelected)),()=>[k(" + "+L(e.collapsSelected.length)+" ... ",1)])]),_:3})):N("",!0)])):N("",!0)],2)]),_:3},8,["visible","placement","overlay-style","overlay-class-name","arrow-point-at-center","auto-adjust-overflow","onUpdate:visible"])}const Fe=Ue(De,[["render",We]]),Me={value:[String,Number,Array],multiple:Boolean,disabled:Boolean,size:String,allowClear:Boolean,placeholder:String,id:String,valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},initValue:[Object,Array],tableConfig:{type:Object,required:!0},bordered:{type:Boolean,default:!0},maxTagCount:Number,maxTagTextLength:Number,arrowPointAtCenter:Boolean,autoAdjustOverflow:{type:Boolean,default:!0},overlayStyle:Object,overlayClassName:String,placement:{type:String,default:"bottomLeft"}},M=J({name:"EleTableSelect",props:Me,emits:["update:value","change","focus","blur","clear","remove-tag","visible-change","select"],setup(e,{emit:a,slots:o,expose:r}){const n=w(null),v=w(""),_=w([]),m=w(!1),u=w(null),i=w([]),c=w(!1),x=V(()=>e.multiple?"checkbox":"radio"),p=V(()=>{const t=["ele-table-select-dropdown"];return e.overlayClassName&&t.push(e.overlayClassName),t.join(" ")}),y=t=>{m.value=t,t&&ye(),a("visible-change",t)},S=(t,l)=>{((()=>{const b=I(e.value);if(!e.multiple)return I(t)&&b?!1:t!==e.value;if(b||!e.value.length)return!!t.length;if(t.length!==e.value.length)return!0;for(let A=0;A<t.length;A++)if(!e.value.includes(t[A]))return!0;return!1})()||l)&&(a("update:value",t),a("change",t))},C=t=>{u.value=t,!e.multiple&&t&&!c.value&&(a("select",t),S(t[e.valueKey]))},O=t=>{i.value=t,e.multiple&&t&&!c.value&&(t.length&&a("select",t),S(t.filter(l=>l!=null).map(l=>l[e.valueKey])))},U=()=>{S(e.multiple?[]:null),y(!1),a("clear")},me=t=>{var l;const d=t.value;S((l=e.value)==null?void 0:l.filter(b=>b!==d)),a("remove-tag",d)},q=t=>{const l=I(e.initValue);if(!e.multiple){if(I(t)){v.value="",j(null);return}const d=B(t);if(d){v.value=d[e.labelKey],u.value!==d&&j(d);return}v.value=l?t:e.initValue[e.labelKey],j(null);return}if(t!=null&&t.length){const{checked:d,selectedList:b}=fe(t);_.value=d,X(b)}else _.value=[],ve()},j=t=>{c.value=!0,C(t),c.value=!1},X=t=>{c.value=!0,O(t),c.value=!1},ve=()=>{c.value=!0,O([]),c.value=!1},fe=t=>{const l=[],d=[],b=!I(e.initValue);t.forEach($=>{const te=B($,i.value);if(te){l.push({label:te[e.labelKey],value:$});return}const H=B($);if(H){d.push(H),l.push({label:H[e.labelKey],value:$});return}const le=(()=>{if(!b)return $;const ae=B($,e.initValue);return ae?ae[e.labelKey]:$})();l.push({label:le,value:$}),d.push({[e.valueKey]:$,[e.labelKey]:le})});const A=i.value.filter($=>t.includes($[e.valueKey])).concat(d);return{checked:l,selectedList:A}},I=t=>t==null||t==="",Z=()=>e.tableConfig!=null&&Array.isArray(e.tableConfig.datasource),ee=()=>{var l;var t;return(l=(t=n.value)==null?void 0:t.getData())!=null?l:[]},_e=()=>Z()?e.tableConfig.datasource:ee(),ge=()=>{var d;var t;const l=(d=(t=n.value)==null?void 0:t.getData())!=null?d:[];return e.multiple?!Array.isArray(e.value)||!e.value.length?!1:l.some(b=>e.value.includes(b[e.valueKey])):l.some(b=>b[e.valueKey]===e.value)},ye=()=>{n.value&&!ge()&&(e.multiple?Array.isArray(e.value)&&e.value.length&&n.value.pageToByValue(e.value[e.value.length-1],e.valueKey):I(e.value)||n.value.pageToByValue(e.value,e.valueKey))},B=(t,l)=>l?l.find(d=>d[e.valueKey]===t):B(t,_e()),be=()=>{var t;if(!e.multiple){if(!I(e.value)){const l=B(e.value);l&&(v.value=l[e.labelKey],j(l))}return}if(!Z()&&((t=e.value)!=null&&t.length)){const l=[],d=[];i.value.forEach(b=>{const A=B(b[e.valueKey],ee());A&&(d.push(b),l.push(A))}),X(i.value.filter(b=>!d.includes(b)).concat(l))}},he=t=>({onClick:()=>{e.multiple?(S(t[e.valueKey]),i.value.some(l=>l[e.valueKey]===t[e.valueKey])?O(i.value.filter(l=>l[e.valueKey]!==t[e.valueKey])):O(i.value.concat([t]))):(C(t),y(!1))}}),G=()=>{!I(e.initValue)&&(e.multiple?S(e.initValue.map(l=>l[e.valueKey]),!0):S(e.initValue[e.valueKey],!0))},xe=(t,l)=>{var d;(d=n.value)==null||d.reload(t,l)};return Ie(()=>{var t;const l=!I(e.initValue);e.multiple?l?G():(t=e.value)!=null&&t.length&&q(e.value):l?G():I(e.value)||q(e.value)}),Y(()=>e.value,t=>{q(t)}),Y(()=>e.initValue,()=>{G()}),r({tableRef:n,reload:xe}),()=>oe(Fe,{value:e.value,multiple:e.multiple,disabled:e.disabled,size:e.size,allowClear:e.allowClear,placeholder:e.placeholder,id:e.id,bordered:e.bordered,maxTagCount:e.maxTagCount,maxTagTextLength:e.maxTagTextLength,arrowPointAtCenter:e.arrowPointAtCenter,autoAdjustOverflow:e.autoAdjustOverflow,overlayStyle:e.overlayStyle,placement:e.placement,selectedLabel:v.value,selected:_.value,visible:m.value,overlayClassName:p.value,onClear:U,"onRemove-tag":me,"onUpdate:visible":y},{default:()=>oe(Ae,{...e.tableConfig,ref:n,rowKey:e.valueKey,current:u.value,selection:i.value,selectionType:x.value,customRow:he,onDone:be,"onUpdate:current":C,"onUpdate:selection":O},{...o,maxTagPlaceholder:void 0}),maxTagPlaceholder:o.maxTagPlaceholder})}});const qe={style:{"max-width":"260px"}},Ge={style:{"margin-top":"12px"}},He={__name:"demo-basic",setup(e){const a=w(),o=D({datasource:[],columns:[{title:"用户账号",dataIndex:"username",sorter:!0,showSorterTooltip:!1},{title:"用户名",key:"nickname",dataIndex:"nickname",sorter:!0,showSorterTooltip:!1},{title:"性别",dataIndex:"sexName",width:80,sorter:!0,showSorterTooltip:!1},{title:"角色",key:"roles"}],toolbar:!1,pageSize:5,pageSizeOptions:["5","10","15","20"],size:"small",rowSelection:{columnWidth:38,fixed:"left"},scroll:{x:480}});ie().then(n=>{o.datasource=n});const r=()=>{a.value=14};return(n,v)=>{const _=E,m=M,u=W,i=F;return g(),T(i,{title:"基础用法",bordered:!1},{default:s(()=>[h("div",qe,[f(m,{"allow-clear":!0,placeholder:"请选择","value-key":"userId","label-key":"nickname",value:a.value,"onUpdate:value":v[0]||(v[0]=c=>a.value=c),"table-config":o,"overlay-style":{width:"520px",maxWidth:"80%"}},{bodyCell:s(({column:c,record:x})=>[c.key==="roles"?(g(!0),K(P,{key:0},R(x.roles,p=>(g(),T(_,{key:p.roleId,color:"blue"},{default:s(()=>[k(L(p.roleName),1)]),_:2},1024))),128)):N("",!0)]),_:1},8,["value","table-config"])]),h("div",Ge,[f(u,{type:"primary",onClick:r},{default:s(()=>[k("回显数据")]),_:1})])]),_:1})}}},Qe={style:{"max-width":"260px"}},Ye={class:"ele-cell",style:{"margin-top":"15px"}},Je=h("div",{style:{"line-height":"22px"}}," 禁用：",-1),Xe={class:"ele-cell-content"},Ze={style:{"margin-top":"12px"}},et={__name:"demo-basic-page",setup(e){const a=w(),o=D({datasource:({page:m,limit:u,where:i,orders:c})=>ue({...i,...c,page:m,limit:u}),columns:[{title:"用户账号",dataIndex:"username",sorter:!0,showSorterTooltip:!1},{title:"用户名",key:"nickname",dataIndex:"nickname",sorter:!0,showSorterTooltip:!1},{title:"性别",dataIndex:"sexName",width:80,sorter:!0,showSorterTooltip:!1},{title:"角色",key:"roles"}],toolbar:!1,pageSize:5,pageSizeOptions:["5","10","15","20"],size:"small",rowSelection:{columnWidth:38,fixed:"left"},scroll:{x:480}}),r=w(!1),n=w(),v=()=>{n.value={userId:14,nickname:"管理员"}},_=m=>{console.log("item:",m)};return(m,u)=>{const i=E,c=M,x=ce,p=de,y=W,S=F;return g(),T(S,{title:"基础用法",bordered:!1},{default:s(()=>[h("div",Qe,[f(c,{"allow-clear":!0,placeholder:"请选择","value-key":"userId","label-key":"nickname",value:a.value,"onUpdate:value":u[0]||(u[0]=C=>a.value=C),"table-config":o,"overlay-style":{width:"520px",maxWidth:"80%"},disabled:r.value,"init-value":n.value,onSelect:_},{bodyCell:s(({column:C,record:O})=>[C.key==="roles"?(g(!0),K(P,{key:0},R(O.roles,U=>(g(),T(i,{key:U.roleId,color:"blue"},{default:s(()=>[k(L(U.roleName),1)]),_:2},1024))),128)):N("",!0)]),_:1},8,["value","table-config","disabled","init-value"])]),h("div",Ye,[Je,h("div",Xe,[f(p,{value:r.value,"onUpdate:value":u[1]||(u[1]=C=>r.value=C),name:"disabled"},{default:s(()=>[f(x,{value:!1},{default:s(()=>[k("否")]),_:1}),f(x,{value:!0},{default:s(()=>[k("是")]),_:1})]),_:1},8,["value"])])]),h("div",Ze,[f(y,{type:"primary",onClick:v},{default:s(()=>[k("回显数据")]),_:1})])]),_:1})}}},tt={style:{"max-width":"260px"}},lt={class:"ele-cell",style:{"margin-top":"15px"}},at=h("div",{style:{"line-height":"22px"}}," 禁用：",-1),nt={class:"ele-cell-content"},ot={style:{"margin-top":"12px"}},st={__name:"demo-multiple",setup(e){const a=w([]),o=D({datasource:[],columns:[{title:"用户账号",dataIndex:"username",sorter:!0,showSorterTooltip:!1},{title:"用户名",key:"nickname",dataIndex:"nickname",sorter:!0,showSorterTooltip:!1},{title:"性别",dataIndex:"sexName",width:80,align:"center",sorter:!0,showSorterTooltip:!1},{title:"角色",key:"roles"}],toolbar:!1,pageSize:5,pageSizeOptions:["5","10","15","20"],size:"small",rowSelection:{columnWidth:38,preserveSelectedRowKeys:!0,fixed:"left"},scroll:{x:480}}),r=w(!1);ie().then(v=>{o.datasource=v});const n=()=>{a.value=[14,18,19]};return(v,_)=>{const m=E,u=M,i=ce,c=de,x=W,p=F;return g(),T(p,{title:"多选",bordered:!1},{default:s(()=>[h("div",tt,[f(u,{multiple:!0,"allow-clear":!0,placeholder:"请选择","value-key":"userId","label-key":"nickname",value:a.value,"onUpdate:value":_[0]||(_[0]=y=>a.value=y),"table-config":o,"overlay-style":{width:"520px",maxWidth:"80%"},disabled:r.value,"init-value":v.initValue,"max-tag-text-length":3,"max-tag-count":5},{bodyCell:s(({column:y,record:S})=>[y.key==="roles"?(g(!0),K(P,{key:0},R(S.roles,C=>(g(),T(m,{key:C.roleId,color:"blue"},{default:s(()=>[k(L(C.roleName),1)]),_:2},1024))),128)):N("",!0)]),_:1},8,["value","table-config","disabled","init-value"])]),h("div",lt,[at,h("div",nt,[f(c,{value:r.value,"onUpdate:value":_[1]||(_[1]=y=>r.value=y),name:"disabled"},{default:s(()=>[f(i,{value:!1},{default:s(()=>[k("否")]),_:1}),f(i,{value:!0},{default:s(()=>[k("是")]),_:1})]),_:1},8,["value"])])]),h("div",ot,[f(x,{type:"primary",onClick:n},{default:s(()=>[k("回显数据")]),_:1})])]),_:1})}}},rt={style:{"max-width":"160px"}},it={__name:"demo-advanced-search",emits:["search"],setup(e,{emit:a}){const o=D({keywords:""}),r=()=>{a("search",o)};return(n,v)=>{const _=re;return g(),K("div",rt,[f(_,{"allow-clear":"",size:"small",value:o.keywords,"onUpdate:value":v[0]||(v[0]=m=>o.keywords=m),placeholder:"输入关键字搜索",onChange:r},{prefix:s(()=>[f(Ve(Ke),{class:"ele-text-placeholder"})]),_:1},8,["value"])])}}},ut={style:{"max-width":"260px"}},ct={style:{"margin-top":"12px"}},dt={__name:"demo-advanced",setup(e){const a=w([]),o=w(null),r=D({datasource:({page:m,limit:u,where:i,orders:c})=>ue({...i,...c,page:m,limit:u}),columns:[{title:"用户账号",dataIndex:"username",sorter:!0,showSorterTooltip:!1},{title:"用户名",key:"nickname",dataIndex:"nickname",sorter:!0,showSorterTooltip:!1},{title:"性别",dataIndex:"sexName",width:80,align:"center",sorter:!0,showSorterTooltip:!1},{title:"角色",key:"roles"}],toolkit:["reload","columns"],pageSize:5,pageSizeOptions:["5","10","15","20"],size:"small",rowSelection:{columnWidth:38,preserveSelectedRowKeys:!0,fixed:"left"},toolsTheme:"default",bordered:!0,toolStyle:{padding:"0 8px"},scroll:{x:480}}),n=w(),v=()=>{n.value=[{userId:14,nickname:"管理员"},{userId:18,nickname:"用户四"},{userId:19,nickname:"用户五"}]},_=m=>{var u;(u=o.value)==null||u.reload({where:m,page:1})};return(m,u)=>{const i=E,c=M,x=W,p=F;return g(),T(p,{title:"可搜索",bordered:!1},{default:s(()=>[h("div",ut,[f(c,{ref_key:"selectRef",ref:o,multiple:!0,"allow-clear":!0,placeholder:"请选择","value-key":"userId","label-key":"nickname",value:a.value,"onUpdate:value":u[0]||(u[0]=y=>a.value=y),"table-config":r,"overlay-style":{width:"520px",maxWidth:"80%"},"init-value":n.value},{bodyCell:s(({column:y,record:S})=>[y.key==="roles"?(g(!0),K(P,{key:0},R(S.roles,C=>(g(),T(i,{key:C.roleId,color:"blue"},{default:s(()=>[k(L(C.roleName),1)]),_:2},1024))),128)):N("",!0)]),toolbar:s(()=>[f(it,{onSearch:_})]),_:1},8,["value","table-config","init-value"])]),h("div",ct,[f(x,{type:"primary",onClick:v},{default:s(()=>[k("回显数据")]),_:1})])]),_:1})}}},mt={class:"ele-body ele-body-card"},vt={name:"ExtensionTableSelect"},Lt=Object.assign(vt,{setup(e){return(a,o)=>(g(),K("div",mt,[f(He),f(et),f(st),f(dt)]))}});export{Lt as default};
