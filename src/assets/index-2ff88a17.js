import{b as m,A as $e,n as mr,q as yr,v as _r,P as Oe,x as Dn,y as Cn,z as Vn,B as Ln,r as oe,C as An,D as In,a as Ft,E as Rn,G as Pn,H as On,I as Fn,J as oa,K as Ue,f as br,L as Gn,_ as Ve,o as ae,c as ge,w as A,u as $,d as y,Q as sa,M as kn,p as ot,i as st,s as Gt,j as Ct,F as En,k as zn,t as Vt,m as Lt,N as la,O as Nn,R as Sr,h as Hn}from"./index-08ed677d.js";import{C as me,_ as kt,a as Et}from"./index-7b650976.js";import{i as $n}from"./index-8c52ef52.js";import{i as Bn}from"./index-6201b7a4.js";import{U as ua}from"./UpOutlined-cabff1d9.js";import{_ as zt}from"./index-dc3e04fd.js";import{bi as ca,_ as N,e as b,B as ue,bj as Un,bk as At,aK as wr,aL as Ge,bl as Mr,bm as xr,k as se,F as jn,v as ce,aP as Nt,h as Z,D as j,bn as fa,bo as Yn,bp as Xn,ab as Tr,H as Jn,ao as Ce,a3 as K,ay as je,P as pt,R as It,$ as Zn,al as Wn,a5 as Dr,a4 as Ht,a0 as $t,bq as Bt,J as Kn,br as qn,K as Qn,ai as Cr,ax as ei,y as Vr,p as ti,g as ai,bs as z,d as Ut,bt as Lr,bu as ri,bv as Ar,x as Ir,o as Rr,bw as Pr,bx as ni,by as Or,ak as Fr,bz as Q,bA as pa,bB as ke,bC as ii,au as ye,z as jt,V as Y,ah as Ee,bD as ze,bE as oi,bF as Gr,b0 as si,bG as li,bH as Yt,a2 as kr,bI as ui,aq as Er,bJ as ci,bK as fi,bL as pi,bM as vi,bN as hi,bO as zr,c as B,bP as Nr,bQ as di,bR as va,bS as Hr,bT as gi,A as et,bU as mi,bV as yi,bW as _i,bX as bi,an as Si,bY as ha,W as tt,T as Ye,bZ as wi,b_ as Mi,O as xi,aE as Ti,S as Di,b$ as Ci,c0 as $r,c1 as Vi,c2 as da,i as Br,aD as Ur,c3 as jr,b2 as Yr,b3 as Ne,a9 as de,c4 as vt,c5 as ht,c6 as Li,c8 as dt,c9 as Ai,ca as Ii,cb as Ri,cc as Pi,aF as ga,cd as Xr,av as Jr,ce as Oi,cf as Fi,n as Ke,cg as ma,ch as Gi,ci as gt,cj as mt,ck as ki,cl as Ei,cm as zi,cn as ya,co as Ni,b8 as Zr,b9 as Wr,ba as Kr,bb as qr,cp as Hi,bc as $i}from"./use-echarts-1c172e57.js";import{i as Bi}from"./index-8dd31c52.js";function Ui(n){var t=n.pageXOffset,e="scrollLeft";if(typeof t!="number"){var a=n.document;t=a.documentElement[e],typeof t!="number"&&(t=a.body[e])}return t}function ji(n){var t,e,a=n.ownerDocument,r=a.body,i=a&&a.documentElement,o=n.getBoundingClientRect();return t=o.left,e=o.top,t-=i.clientLeft||r.clientLeft||0,e-=i.clientTop||r.clientTop||0,{left:t,top:e}}function Yi(n){var t=ji(n),e=n.ownerDocument,a=e.defaultView||e.parentWindow;return t.left+=Ui(a),t.left}var Xi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const Ji=Xi;function _a(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.forEach(function(r){Zi(n,r,e[r])})}return n}function Zi(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var Xt=function(t,e){var a=_a({},t,e.attrs);return m($e,_a({},a,{icon:Ji}),null)};Xt.displayName="StarFilled";Xt.inheritAttrs=!1;const De=Xt;var Wi={value:Number,index:Number,prefixCls:String,allowHalf:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},character:Oe.any,characterRender:Function,focused:{type:Boolean,default:void 0},count:Number,onClick:Function,onHover:Function};const Ki=mr({compatConfig:{MODE:3},name:"Star",inheritAttrs:!1,props:Wi,emits:["hover","click"],setup:function(t,e){var a=e.slots,r=e.emit,i=function(c){var f=t.index;r("hover",c,f)},o=function(c){var f=t.index;r("click",c,f)},s=function(c){var f=t.index;c.keyCode===13&&r("click",c,f)},l=yr(function(){var u=t.prefixCls,c=t.index,f=t.value,v=t.allowHalf,p=t.focused,h=c+1,g=u;return f===0&&c===0&&p?g+=" ".concat(u,"-focused"):v&&f+.5>=h&&f<h?(g+=" ".concat(u,"-half ").concat(u,"-active"),p&&(g+=" ".concat(u,"-focused"))):(g+=h<=f?" ".concat(u,"-full"):" ".concat(u,"-zero"),h===f&&p&&(g+=" ".concat(u,"-focused"))),g});return function(){var u=t.disabled,c=t.prefixCls,f=t.characterRender,v=t.index,p=t.count,h=t.value,g=_r(a,t,"character"),d=m("li",{class:l.value},[m("div",{onClick:u?null:o,onKeydown:u?null:s,onMousemove:u?null:i,role:"radio","aria-checked":h>v?"true":"false","aria-posinset":v+1,"aria-setsize":p,tabindex:u?-1:0},[m("div",{class:"".concat(c,"-first")},[g]),m("div",{class:"".concat(c,"-second")},[g])])]);return f&&(d=f(d,t)),d}}});var qi=function(){return{prefixCls:String,count:Number,value:Number,allowHalf:{type:Boolean,default:void 0},allowClear:{type:Boolean,default:void 0},tooltips:Array,disabled:{type:Boolean,default:void 0},character:Oe.any,autofocus:{type:Boolean,default:void 0},tabindex:Oe.oneOfType([Oe.number,Oe.string]),direction:String,id:String,onChange:Function,onHoverChange:Function,"onUpdate:value":Function,onFocus:Function,onBlur:Function,onKeydown:Function}},Qi=mr({compatConfig:{MODE:3},name:"ARate",inheritAttrs:!1,props:Cn(qi(),{value:0,count:5,allowHalf:!1,allowClear:!0,tabindex:0,direction:"ltr"}),setup:function(t,e){var a=e.slots,r=e.attrs,i=e.emit,o=e.expose,s=Vn("rate",t),l=s.prefixCls,u=s.direction,c=Ln(),f=oe(),v=An(),p=In(v,2),h=p[0],g=p[1],d=Ft({value:t.value,focused:!1,cleanedValue:null,hoverValue:void 0});Rn(function(){return t.value},function(){d.value=t.value});var _=function(L){return Gn(g.value.get(L))},w=function(L,P){var H=u.value==="rtl",F=L+1;if(t.allowHalf){var k=_(L),re=Yi(k),ne=k.clientWidth;(H&&P-re>ne/2||!H&&P-re<ne/2)&&(F-=.5)}return F},S=function(L){t.value===void 0&&(d.value=L),i("update:value",L),i("change",L),c.onFieldChange()},M=function(L,P){var H=w(P,L.pageX);H!==d.cleanedValue&&(d.hoverValue=H,d.cleanedValue=null),i("hoverChange",H)},x=function(){d.hoverValue=void 0,d.cleanedValue=null,i("hoverChange",void 0)},T=function(L,P){var H=t.allowClear,F=w(P,L.pageX),k=!1;H&&(k=F===d.value),x(),S(k?0:F),d.cleanedValue=k?F:null},V=function(L){d.focused=!0,i("focus",L)},D=function(L){d.focused=!1,i("blur",L),c.onFieldBlur()},C=function(L){var P=L.keyCode,H=t.count,F=t.allowHalf,k=u.value==="rtl";P===Ue.RIGHT&&d.value<H&&!k?(F?d.value+=.5:d.value+=1,S(d.value),L.preventDefault()):P===Ue.LEFT&&d.value>0&&!k||P===Ue.RIGHT&&d.value>0&&k?(F?d.value-=.5:d.value-=1,S(d.value),L.preventDefault()):P===Ue.LEFT&&d.value<H&&k&&(F?d.value+=.5:d.value+=1,S(d.value),L.preventDefault()),i("keydown",L)},I=function(){t.disabled||f.value.focus()},G=function(){t.disabled||f.value.blur()};o({focus:I,blur:G}),Pn(function(){var O=t.autofocus,L=t.disabled;O&&!L&&I()});var R=function(L,P){var H=P.index,F=t.tooltips;return F?m(br,{title:F[H]},{default:function(){return[L]}}):L},E=_r(a,t,"character")||m(De,null,null);return function(){for(var O=t.count,L=t.allowHalf,P=t.disabled,H=t.tabindex,F=t.id,k=F===void 0?c.id.value:F,re=r.class,ne=r.style,U=[],ie=P?"".concat(l.value,"-disabled"):"",q=0;q<O;q++)U.push(m(Ki,{ref:h(q),key:q,index:q,count:O,disabled:P,prefixCls:"".concat(l.value,"-star"),allowHalf:L,value:d.hoverValue===void 0?d.value:d.hoverValue,onClick:T,onHover:M,character:E,characterRender:R,focused:d.focused},null));var _e=On(l.value,ie,re,Fn({},"".concat(l.value,"-rtl"),u.value==="rtl"));return m("ul",oa(oa({},r),{},{id:k,class:_e,style:ne,onMouseleave:P?null:x,tabindex:P?-1:H,onFocus:P?null:V,onBlur:P?null:D,onKeydown:P?null:C,ref:f,role:"radiogroup"}),[U])}}});const eo=Dn(Qi);var to={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M396 512a112 112 0 10224 0 112 112 0 10-224 0zm546.2-25.8C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM508 688c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z"}}]},name:"eye",theme:"filled"};const ao=to;function ba(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.forEach(function(r){ro(n,r,e[r])})}return n}function ro(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var Jt=function(t,e){var a=ba({},t,e.attrs);return m($e,ba({},a,{icon:ao}),null)};Jt.displayName="EyeFilled";Jt.inheritAttrs=!1;const no=Jt;var io={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M834.1 469.2A347.49 347.49 0 00751.2 354l-29.1-26.7a8.09 8.09 0 00-13 3.3l-13 37.3c-8.1 23.4-23 47.3-44.1 70.8-1.4 1.5-3 1.9-4.1 2-1.1.1-2.8-.1-4.3-1.5-1.4-1.2-2.1-3-2-4.8 3.7-60.2-14.3-128.1-53.7-202C555.3 171 510 123.1 453.4 89.7l-41.3-24.3c-5.4-3.2-12.3 1-12 7.3l2.2 48c1.5 32.8-2.3 61.8-11.3 85.9-11 29.5-26.8 56.9-47 81.5a295.64 295.64 0 01-47.5 46.1 352.6 352.6 0 00-100.3 121.5A347.75 347.75 0 00160 610c0 47.2 9.3 92.9 27.7 136a349.4 349.4 0 0075.5 110.9c32.4 32 70 57.2 111.9 74.7C418.5 949.8 464.5 959 512 959s93.5-9.2 136.9-27.3A348.6 348.6 0 00760.8 857c32.4-32 57.8-69.4 75.5-110.9a344.2 344.2 0 0027.7-136c0-48.8-10-96.2-29.9-140.9z"}}]},name:"fire",theme:"filled"};const oo=io;function Sa(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.forEach(function(r){so(n,r,e[r])})}return n}function so(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var Zt=function(t,e){var a=Sa({},t,e.attrs);return m($e,Sa({},a,{icon:oo}),null)};Zt.displayName="FireFilled";Zt.inheritAttrs=!1;const lo=Zt;var uo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 305H624V192c0-17.7-14.3-32-32-32H184v-40c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V640h248v113c0 17.7 14.3 32 32 32h416c17.7 0 32-14.3 32-32V337c0-17.7-14.3-32-32-32z"}}]},name:"flag",theme:"filled"};const co=uo;function wa(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.forEach(function(r){fo(n,r,e[r])})}return n}function fo(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var Wt=function(t,e){var a=wa({},t,e.attrs);return m($e,wa({},a,{icon:co}),null)};Wt.displayName="FlagFilled";Wt.inheritAttrs=!1;const po=Wt;var vo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7z"}}]},name:"thunderbolt",theme:"filled"};const ho=vo;function Ma(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),a.forEach(function(r){go(n,r,e[r])})}return n}function go(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var Kt=function(t,e){var a=Ma({},t,e.attrs);return m($e,Ma({},a,{icon:ho}),null)};Kt.displayName="ThunderboltFilled";Kt.inheritAttrs=!1;const mo=Kt;var yo=1e-8;function xa(n,t){return Math.abs(n-t)<yo}function Ta(n,t,e){var a=0,r=n[0];if(!r)return!1;for(var i=1;i<n.length;i++){var o=n[i];a+=ca(r[0],r[1],o[0],o[1],t,e),r=o}var s=n[0];return(!xa(r[0],s[0])||!xa(r[1],s[1]))&&(a+=ca(r[0],r[1],s[0],s[1],t,e)),a!==0}var _o=[];function yt(n,t){for(var e=0;e<n.length;e++)Ge(n[e],n[e],t)}function Da(n,t,e,a){for(var r=0;r<n.length;r++){var i=n[r];a&&(i=a.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(Mr(t,t,i),xr(e,e,i))}}function bo(n){for(var t=0,e=0,a=0,r=n.length,i=n[r-1][0],o=n[r-1][1],s=0;s<r;s++){var l=n[s][0],u=n[s][1],c=i*u-l*o;t+=c,e+=(i+l)*c,a+=(o+u)*c,i=l,o=u}return t?[e/t/3,a/t/3,t]:[n[0][0]||0,n[0][1]||0]}var Qr=function(){function n(t){this.name=t}return n.prototype.setCenter=function(t){this._center=t},n.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},n}(),Ca=function(){function n(t,e){this.type="polygon",this.exterior=t,this.interiors=e}return n}(),Va=function(){function n(t){this.type="linestring",this.points=t}return n}(),en=function(n){N(t,n);function t(e,a,r){var i=n.call(this,e)||this;return i.type="geoJSON",i.geometries=a,i._center=r&&[r[0],r[1]],i}return t.prototype.calcCenter=function(){for(var e=this.geometries,a,r=0,i=0;i<e.length;i++){var o=e[i],s=o.exterior,l=s&&s.length;l>r&&(a=o,r=l)}if(a)return bo(a.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},t.prototype.getBoundingRect=function(e){var a=this._rect;if(a&&!e)return a;var r=[1/0,1/0],i=[-1/0,-1/0],o=this.geometries;return b(o,function(s){s.type==="polygon"?Da(s.exterior,r,i,e):b(s.points,function(l){Da(l,r,i,e)})}),isFinite(r[0])&&isFinite(r[1])&&isFinite(i[0])&&isFinite(i[1])||(r[0]=r[1]=i[0]=i[1]=0),a=new ue(r[0],r[1],i[0]-r[0],i[1]-r[1]),e||(this._rect=a),a},t.prototype.contain=function(e){var a=this.getBoundingRect(),r=this.geometries;if(!a.contain(e[0],e[1]))return!1;e:for(var i=0,o=r.length;i<o;i++){var s=r[i];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(Ta(l,e[0],e[1])){for(var c=0;c<(u?u.length:0);c++)if(Ta(u[c],e[0],e[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(e,a,r,i){var o=this.getBoundingRect(),s=o.width/o.height;r?i||(i=r/s):r=s*i;for(var l=new ue(e,a,r,i),u=o.calculateTransform(l),c=this.geometries,f=0;f<c.length;f++){var v=c[f];v.type==="polygon"?(yt(v.exterior,u),b(v.interiors,function(p){yt(p,u)})):b(v.points,function(p){yt(p,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},t.prototype.cloneShallow=function(e){e==null&&(e=this.name);var a=new t(e,this.geometries,this._center);return a._rect=this._rect,a.transformTo=null,a},t}(Qr),So=function(n){N(t,n);function t(e,a){var r=n.call(this,e)||this;return r.type="geoSVG",r._elOnlyForCalculate=a,r}return t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,a=e.getBoundingRect(),r=[a.x+a.width/2,a.y+a.height/2],i=Un(_o),o=e;o&&!o.isGeoSVGGraphicRoot;)At(i,o.getLocalTransform(),i),o=o.parent;return wr(i,i),Ge(r,r,i),r},t}(Qr);function wo(n){if(!n.UTF8Encoding)return n;var t=n,e=t.UTF8Scale;e==null&&(e=1024);var a=t.features;return b(a,function(r){var i=r.geometry,o=i.encodeOffsets,s=i.coordinates;if(o)switch(i.type){case"LineString":i.coordinates=tn(s,o,e);break;case"Polygon":_t(s,o,e);break;case"MultiLineString":_t(s,o,e);break;case"MultiPolygon":b(s,function(l,u){return _t(l,o[u],e)})}}),t.UTF8Encoding=!1,t}function _t(n,t,e){for(var a=0;a<n.length;a++)n[a]=tn(n[a],t[a],e)}function tn(n,t,e){for(var a=[],r=t[0],i=t[1],o=0;o<n.length;o+=2){var s=n.charCodeAt(o)-64,l=n.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=r,l+=i,r=s,i=l,a.push([s/e,l/e])}return a}function Mo(n,t){return n=wo(n),se(jn(n.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var a=e.properties,r=e.geometry,i=[];switch(r.type){case"Polygon":var o=r.coordinates;i.push(new Ca(o[0],o.slice(1)));break;case"MultiPolygon":b(r.coordinates,function(l){l[0]&&i.push(new Ca(l[0],l.slice(1)))});break;case"LineString":i.push(new Va([r.coordinates]));break;case"MultiLineString":i.push(new Va(r.coordinates))}var s=new en(a[t||"name"],i,a.cp);return s.properties=a,s})}var Xe=Math.PI*2,La=Math.PI/180;function an(n,t){return Nt(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function rn(n,t){var e=an(n,t),a=n.get("center"),r=n.get("radius");Z(r)||(r=[0,r]);var i=j(e.width,t.getWidth()),o=j(e.height,t.getHeight()),s=Math.min(i,o),l=j(r[0],s/2),u=j(r[1],s/2),c,f,v=n.coordinateSystem;if(v){var p=v.dataToPoint(a);c=p[0]||0,f=p[1]||0}else Z(a)||(a=[a,a]),c=j(a[0],i)+e.x,f=j(a[1],o)+e.y;return{cx:c,cy:f,r0:l,r:u}}function xo(n,t,e){t.eachSeriesByType(n,function(a){var r=a.getData(),i=r.mapDimension("value"),o=an(a,e),s=rn(a,e),l=s.cx,u=s.cy,c=s.r,f=s.r0,v=-a.get("startAngle")*La,p=a.get("minAngle")*La,h=0;r.each(i,function(I){!isNaN(I)&&h++});var g=r.getSum(i),d=Math.PI/(g||h)*2,_=a.get("clockwise"),w=a.get("roseType"),S=a.get("stillShowZeroSum"),M=r.getDataExtent(i);M[0]=0;var x=Xe,T=0,V=v,D=_?1:-1;if(r.setLayout({viewRect:o,r:c}),r.each(i,function(I,G){var R;if(isNaN(I)){r.setItemLayout(G,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:_,cx:l,cy:u,r0:f,r:w?NaN:c});return}w!=="area"?R=g===0&&S?d:I*d:R=Xe/h,R<p?(R=p,x-=p):T+=I;var E=V+D*R;r.setItemLayout(G,{angle:R,startAngle:V,endAngle:E,clockwise:_,cx:l,cy:u,r0:f,r:w?ce(I,M,[f,c]):c}),V=E}),x<Xe&&h)if(x<=.001){var C=Xe/h;r.each(i,function(I,G){if(!isNaN(I)){var R=r.getItemLayout(G);R.angle=C,R.startAngle=v+D*G*C,R.endAngle=v+D*(G+1)*C}})}else d=x/T,V=v,r.each(i,function(I,G){if(!isNaN(I)){var R=r.getItemLayout(G),E=R.angle===p?p:I*d;R.startAngle=V,R.endAngle=V+D*E,V+=D*E}})})}function To(n){return{seriesType:n,reset:function(t,e){var a=e.findComponents({mainType:"legend"});if(!(!a||!a.length)){var r=t.getData();r.filterSelf(function(i){for(var o=r.getName(i),s=0;s<a.length;s++)if(!a[s].isSelected(o))return!1;return!0})}}}}var Do=Math.PI/180;function Aa(n,t,e,a,r,i,o,s,l,u){if(n.length<2)return;function c(g){for(var d=g.rB,_=d*d,w=0;w<g.list.length;w++){var S=g.list[w],M=Math.abs(S.label.y-e),x=a+S.len,T=x*x,V=Math.sqrt((1-Math.abs(M*M/_))*T),D=t+(V+S.len2)*r,C=D-S.label.x,I=S.targetTextWidth-C*r;nn(S,I,!0),S.label.x=D}}function f(g){for(var d={list:[],maxY:0},_={list:[],maxY:0},w=0;w<g.length;w++)if(g[w].labelAlignTo==="none"){var S=g[w],M=S.label.y>e?_:d,x=Math.abs(S.label.y-e);if(x>=M.maxY){var T=S.label.x-t-S.len2*r,V=a+S.len,D=Math.abs(T)<V?Math.sqrt(x*x/(1-T*T/V/V)):V;M.rB=D,M.maxY=x}M.list.push(S)}c(d),c(_)}for(var v=n.length,p=0;p<v;p++)if(n[p].position==="outer"&&n[p].labelAlignTo==="labelLine"){var h=n[p].label.x-u;n[p].linePoints[1][0]+=h,n[p].label.x=u}Jn(n,l,l+o)&&f(n)}function Co(n,t,e,a,r,i,o,s){for(var l=[],u=[],c=Number.MAX_VALUE,f=-Number.MAX_VALUE,v=0;v<n.length;v++){var p=n[v].label;bt(n[v])||(p.x<t?(c=Math.min(c,p.x),l.push(n[v])):(f=Math.max(f,p.x),u.push(n[v])))}for(var v=0;v<n.length;v++){var h=n[v];if(!bt(h)&&h.linePoints){if(h.labelStyleWidth!=null)continue;var p=h.label,g=h.linePoints,d=void 0;h.labelAlignTo==="edge"?p.x<t?d=g[2][0]-h.labelDistance-o-h.edgeDistance:d=o+r-h.edgeDistance-g[2][0]-h.labelDistance:h.labelAlignTo==="labelLine"?p.x<t?d=c-o-h.bleedMargin:d=o+r-f-h.bleedMargin:p.x<t?d=p.x-o-h.bleedMargin:d=o+r-p.x-h.bleedMargin,h.targetTextWidth=d,nn(h,d)}}Aa(u,t,e,a,1,r,i,o,s,f),Aa(l,t,e,a,-1,r,i,o,s,c);for(var v=0;v<n.length;v++){var h=n[v];if(!bt(h)&&h.linePoints){var p=h.label,g=h.linePoints,_=h.labelAlignTo==="edge",w=p.style.padding,S=w?w[1]+w[3]:0,M=p.style.backgroundColor?0:S,x=h.rect.width+M,T=g[1][0]-g[2][0];_?p.x<t?g[2][0]=o+h.edgeDistance+x+h.labelDistance:g[2][0]=o+r-h.edgeDistance-x-h.labelDistance:(p.x<t?g[2][0]=p.x+h.labelDistance:g[2][0]=p.x-h.labelDistance,g[1][0]=g[2][0]+T),g[1][1]=g[2][1]=p.y}}}function nn(n,t,e){if(e===void 0&&(e=!1),n.labelStyleWidth==null){var a=n.label,r=a.style,i=n.rect,o=r.backgroundColor,s=r.padding,l=s?s[1]+s[3]:0,u=r.overflow,c=i.width+(o?0:l);if(t<c||e){var f=i.height;if(u&&u.match("break")){a.setStyle("backgroundColor",null),a.setStyle("width",t-l);var v=a.getBoundingRect();a.setStyle("width",Math.ceil(v.width)),a.setStyle("backgroundColor",o)}else{var p=t-l,h=t<c?p:e?p>n.unconstrainedWidth?null:p:null;a.setStyle("width",h)}var g=a.getBoundingRect();i.width=g.width;var d=(a.style.margin||0)+2.1;i.height=g.height+d,i.y-=(i.height-f)/2}}}function bt(n){return n.position==="center"}function Vo(n){var t=n.getData(),e=[],a,r,i=!1,o=(n.get("minShowLabelAngle")||0)*Do,s=t.getLayout("viewRect"),l=t.getLayout("r"),u=s.width,c=s.x,f=s.y,v=s.height;function p(T){T.ignore=!0}function h(T){if(!T.ignore)return!0;for(var V in T.states)if(T.states[V].ignore===!1)return!0;return!1}t.each(function(T){var V=t.getItemGraphicEl(T),D=V.shape,C=V.getTextContent(),I=V.getTextGuideLine(),G=t.getItemModel(T),R=G.getModel("label"),E=R.get("position")||G.get(["emphasis","label","position"]),O=R.get("distanceToLabelLine"),L=R.get("alignTo"),P=j(R.get("edgeDistance"),u),H=R.get("bleedMargin"),F=G.getModel("labelLine"),k=F.get("length");k=j(k,u);var re=F.get("length2");if(re=j(re,u),Math.abs(D.endAngle-D.startAngle)<o){b(C.states,p),C.ignore=!0,I&&(b(I.states,p),I.ignore=!0);return}if(h(C)){var ne=(D.startAngle+D.endAngle)/2,U=Math.cos(ne),ie=Math.sin(ne),q,_e,ea,Be;a=D.cx,r=D.cy;var be=E==="inside"||E==="inner";if(E==="center")q=D.cx,_e=D.cy,Be="center";else{var ut=(be?(D.r+D.r0)/2*U:D.r*U)+a,ct=(be?(D.r+D.r0)/2*ie:D.r*ie)+r;if(q=ut+U*3,_e=ct+ie*3,!be){var ta=ut+U*(k+l-D.r),aa=ct+ie*(k+l-D.r),ra=ta+(U<0?-1:1)*re,na=aa;L==="edge"?q=U<0?c+P:c+u-P:q=ra+(U<0?-O:O),_e=na,ea=[[ut,ct],[ta,aa],[ra,na]]}Be=be?"center":L==="edge"?U>0?"right":"left":U>0?"left":"right"}var Le=Math.PI,Se=0,Ae=R.get("rotate");if(Tr(Ae))Se=Ae*(Le/180);else if(E==="center")Se=0;else if(Ae==="radial"||Ae===!0){var xn=U<0?-ne+Le:-ne;Se=xn}else if(Ae==="tangential"&&E!=="outside"&&E!=="outer"){var we=Math.atan2(U,ie);we<0&&(we=Le*2+we);var Tn=ie>0;Tn&&(we=Le+we),Se=we-Le}if(i=!!Se,C.x=q,C.y=_e,C.rotation=Se,C.setStyle({verticalAlign:"middle"}),be){C.setStyle({align:Be});var ft=C.states.select;ft&&(ft.x+=C.x,ft.y+=C.y)}else{var Ie=C.getBoundingRect().clone();Ie.applyTransform(C.getComputedTransform());var ia=(C.style.margin||0)+2.1;Ie.y-=ia/2,Ie.height+=ia,e.push({label:C,labelLine:I,position:E,len:k,len2:re,minTurnAngle:F.get("minTurnAngle"),maxSurfaceAngle:F.get("maxSurfaceAngle"),surfaceNormal:new fa(U,ie),linePoints:ea,textAlign:Be,labelDistance:O,labelAlignTo:L,edgeDistance:P,bleedMargin:H,rect:Ie,unconstrainedWidth:Ie.width,labelStyleWidth:C.style.width})}V.setTextConfig({inside:be})}}),!i&&n.get("avoidLabelOverlap")&&Co(e,a,r,l,u,v,c,f);for(var g=0;g<e.length;g++){var d=e[g],_=d.label,w=d.labelLine,S=isNaN(_.x)||isNaN(_.y);if(_){_.setStyle({align:d.textAlign}),S&&(b(_.states,p),_.ignore=!0);var M=_.states.select;M&&(M.x+=_.x,M.y+=_.y)}if(w){var x=d.linePoints;S||!x?(b(w.states,p),w.ignore=!0):(Yn(x,d.minTurnAngle),Xn(x,d.surfaceNormal,d.maxSurfaceAngle),w.setShape({points:x}),_.__hostTarget.textGuideLineConfig={anchor:new fa(x[0][0],x[0][1])})}}}var Lo=function(n){N(t,n);function t(e,a,r){var i=n.call(this)||this;i.z2=2;var o=new Ce;return i.setTextContent(o),i.updateData(e,a,r,!0),i}return t.prototype.updateData=function(e,a,r,i){var o=this,s=e.hostModel,l=e.getItemModel(a),u=l.getModel("emphasis"),c=e.getItemLayout(a),f=K(je(l.getModel("itemStyle"),c,!0),c);if(isNaN(f.startAngle)){o.setShape(f);return}if(i){o.setShape(f);var v=s.getShallow("animationType");s.ecModel.ssr?(pt(o,{scaleX:0,scaleY:0},s,{dataIndex:a,isFrom:!0}),o.originX=f.cx,o.originY=f.cy):v==="scale"?(o.shape.r=c.r0,pt(o,{shape:{r:c.r}},s,a)):r!=null?(o.setShape({startAngle:r,endAngle:r}),pt(o,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},s,a)):(o.shape.endAngle=c.startAngle,It(o,{shape:{endAngle:c.endAngle}},s,a))}else Zn(o),It(o,{shape:f},s,a);o.useStyle(e.getItemVisual(a,"style")),Wn(o,l);var p=(c.startAngle+c.endAngle)/2,h=s.get("selectedOffset"),g=Math.cos(p)*h,d=Math.sin(p)*h,_=l.getShallow("cursor");_&&o.attr("cursor",_),this._updateLabel(s,e,a),o.ensureState("emphasis").shape=K({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},je(u.getModel("itemStyle"),c)),K(o.ensureState("select"),{x:g,y:d,shape:je(l.getModel(["select","itemStyle"]),c)}),K(o.ensureState("blur"),{shape:je(l.getModel(["blur","itemStyle"]),c)});var w=o.getTextGuideLine(),S=o.getTextContent();w&&K(w.ensureState("select"),{x:g,y:d}),K(S.ensureState("select"),{x:g,y:d}),Dr(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e,a,r){var i=this,o=a.getItemModel(r),s=o.getModel("labelLine"),l=a.getItemVisual(r,"style"),u=l&&l.fill,c=l&&l.opacity;Ht(i,$t(o),{labelFetcher:a.hostModel,labelDataIndex:r,inheritColor:u,defaultOpacity:c,defaultText:e.getFormattedLabel(r,"normal")||a.getName(r)});var f=i.getTextContent();i.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var v=e.get(["label","position"]);if(v!=="outside"&&v!=="outer")i.removeTextGuideLine();else{var p=this.getTextGuideLine();p||(p=new Bt,this.setTextGuideLine(p)),Kn(this,Qn(o),{stroke:u,opacity:qn(s.get(["lineStyle","opacity"]),c,1)})}},t}(Cr),Ao=function(n){N(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return t.prototype.render=function(e,a,r,i){var o=e.getData(),s=this._data,l=this.group,u;if(!s&&o.count()>0){for(var c=o.getItemLayout(0),f=1;isNaN(c&&c.startAngle)&&f<o.count();++f)c=o.getItemLayout(f);c&&(u=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&e.get("showEmptyCircle")){var v=new Cr({shape:rn(e,r)});v.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=v,l.add(v)}o.diff(s).add(function(p){var h=new Lo(o,p,u);o.setItemGraphicEl(p,h),l.add(h)}).update(function(p,h){var g=s.getItemGraphicEl(h);g.updateData(o,p,u),g.off("click"),l.add(g),o.setItemGraphicEl(p,g)}).remove(function(p){var h=s.getItemGraphicEl(p);ei(h,e,p)}).execute(),Vo(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,a){var r=a.getData(),i=r.getItemLayout(0);if(i){var o=e[0]-i.cx,s=e[1]-i.cy,l=Math.sqrt(o*o+s*s);return l<=i.r&&l>=i.r0}},t.type="pie",t}(Vr);const Io=Ao;function on(n,t,e){t=Z(t)&&{coordDimensions:t}||K({encodeDefine:n.getEncode()},t);var a=n.getSource(),r=ti(a,t).dimensions,i=new ai(r,n);return i.initData(a,e),i}var Ro=function(){function n(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return n.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},n.prototype.containName=function(t){var e=this._getRawData();return e.indexOfName(t)>=0},n.prototype.indexOfName=function(t){var e=this._getDataWithEncodedVisual();return e.indexOfName(t)},n.prototype.getItemVisual=function(t,e){var a=this._getDataWithEncodedVisual();return a.getItemVisual(t,e)},n}();const Po=Ro;var Oo=Rr(),Fo=function(n){N(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new Po(z(this.getData,this),z(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return on(this,{coordDimensions:["value"],encodeDefaulter:Ut(Lr,this)})},t.prototype.getDataParams=function(e){var a=this.getData(),r=Oo(a),i=r.seats;if(!i){var o=[];a.each(a.mapDimension("value"),function(l){o.push(l)}),i=r.seats=ri(o,a.hostModel.get("percentPrecision"))}var s=n.prototype.getDataParams.call(this,e);return s.percent=i[e]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(e){Ar(e,"labelLine",["show"]);var a=e.labelLine,r=e.emphasis.labelLine;a.show=a.show&&e.label.show,r.show=r.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(Ir);const Go=Fo;function ko(n){return{seriesType:n,reset:function(t,e){var a=t.getData();a.filterSelf(function(r){var i=a.mapDimension("value"),o=a.get(i,r);return!(Tr(o)&&!isNaN(o)&&o<0)})}}}function Eo(n){n.registerChartView(Io),n.registerSeriesModel(Go),Pr("pie",n.registerAction),n.registerLayout(Ut(xo,"pie")),n.registerProcessor(To("pie")),n.registerProcessor(ko("pie"))}var Ia="\0_ec_interaction_mutex";function Ra(n,t){return!!zo(n)[t]}function zo(n){return n[Ia]||(n[Ia]={})}ni({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Or);var No=function(n){N(t,n);function t(e){var a=n.call(this)||this;a._zr=e;var r=z(a._mousedownHandler,a),i=z(a._mousemoveHandler,a),o=z(a._mouseupHandler,a),s=z(a._mousewheelHandler,a),l=z(a._pinchHandler,a);return a.enable=function(u,c){this.disable(),this._opt=Fr(Q(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(e.on("mousedown",r),e.on("mousemove",i),e.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(e.on("mousewheel",s),e.on("pinch",l))},a.disable=function(){e.off("mousedown",r),e.off("mousemove",i),e.off("mouseup",o),e.off("mousewheel",s),e.off("pinch",l)},a}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!pa(e)){for(var a=e.target;a;){if(a.draggable)return;a=a.__hostTarget||a.parent}var r=e.offsetX,i=e.offsetY;this.pointerChecker&&this.pointerChecker(e,r,i)&&(this._x=r,this._y=i,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!qe("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||Ra(this._zr,"globalPan"))){var a=e.offsetX,r=e.offsetY,i=this._x,o=this._y,s=a-i,l=r-o;this._x=a,this._y=r,this._opt.preventDefaultMouseMove&&ke(e.event),sn(this,"pan","moveOnMouseMove",e,{dx:s,dy:l,oldX:i,oldY:o,newX:a,newY:r,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){pa(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var a=qe("zoomOnMouseWheel",e,this._opt),r=qe("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,o=Math.abs(i),s=e.offsetX,l=e.offsetY;if(!(i===0||!a&&!r)){if(a){var u=o>3?1.4:o>1?1.2:1.1,c=i>0?u:1/u;St(this,"zoom","zoomOnMouseWheel",e,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(r){var f=Math.abs(i),v=(i>0?1:-1)*(f>3?.4:f>1?.15:.05);St(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:v,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){if(!Ra(this._zr,"globalPan")){var a=e.pinchScale>1?1.1:1/1.1;St(this,"zoom",null,e,{scale:a,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},t}(ii);function St(n,t,e,a,r){n.pointerChecker&&n.pointerChecker(a,r.originX,r.originY)&&(ke(a.event),sn(n,t,e,a,r))}function sn(n,t,e,a,r){r.isAvailableBehavior=z(qe,null,e,a),n.trigger(t,r)}function qe(n,t,e){var a=e[n];return!n||a&&(!ye(a)||t.event[a+"Key"])}const Ho=No;function $o(n,t,e){var a=n.target;a.x+=t,a.y+=e,a.dirty()}function Bo(n,t,e,a){var r=n.target,i=n.zoomLimit,o=n.zoom=n.zoom||1;if(o*=t,i){var s=i.min||0,l=i.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/n.zoom;n.zoom=o,r.x-=(e-r.x)*(u-1),r.y-=(a-r.y)*(u-1),r.scaleX*=u,r.scaleY*=u,r.dirty()}var Uo={axisPointer:1,tooltip:1,brush:1};function jo(n,t,e){var a=t.getComponentByElement(n.topTarget),r=a&&a.coordinateSystem;return a&&a!==e&&!Uo.hasOwnProperty(a.mainType)&&r&&r.model!==e}function ln(n){if(ye(n)){var t=new DOMParser;n=t.parseFromString(n,"text/xml")}var e=n;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var wt,at={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Pa=jt(at),rt={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Oa=jt(rt),Yo=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(t,e){e=e||{};var a=ln(t);this._defsUsePending=[];var r=new Y;this._root=r;var i=[],o=a.getAttribute("viewBox")||"",s=parseFloat(a.getAttribute("width")||e.width),l=parseFloat(a.getAttribute("height")||e.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),J(a,r,null,!0,!1);for(var u=a.firstChild;u;)this._parseNode(u,r,i,null,!1,!1),u=u.nextSibling;Zo(this._defs,this._defsUsePending),this._defsUsePending=[];var c,f;if(o){var v=lt(o);v.length>=4&&(c={x:parseFloat(v[0]||0),y:parseFloat(v[1]||0),width:parseFloat(v[2]),height:parseFloat(v[3])})}if(c&&s!=null&&l!=null&&(f=cn(c,{x:0,y:0,width:s,height:l}),!e.ignoreViewBox)){var p=r;r=new Y,r.add(p),p.scaleX=p.scaleY=f.scale,p.x=f.x,p.y=f.y}return!e.ignoreRootClip&&s!=null&&l!=null&&r.setClipPath(new Ee({shape:{x:0,y:0,width:s,height:l}})),{root:r,width:s,height:l,viewBoxRect:c,viewBoxTransform:f,named:i}},n.prototype._parseNode=function(t,e,a,r,i,o){var s=t.nodeName.toLowerCase(),l,u=r;if(s==="defs"&&(i=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=e;else{if(!i){var c=wt[s];if(c&&ze(wt,s)){l=c.call(this,t,e);var f=t.getAttribute("name");if(f){var v={name:f,namedFrom:null,svgNodeTagLower:s,el:l};a.push(v),s==="g"&&(u=v)}else r&&a.push({name:r.name,namedFrom:r,svgNodeTagLower:s,el:l});e.add(l)}}var p=Fa[s];if(p&&ze(Fa,s)){var h=p.call(this,t),g=t.getAttribute("id");g&&(this._defs[g]=h)}}if(l&&l.isGroup)for(var d=t.firstChild;d;)d.nodeType===1?this._parseNode(d,l,a,u,i,o):d.nodeType===3&&o&&this._parseText(d,l),d=d.nextSibling},n.prototype._parseText=function(t,e){var a=new oi({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});W(e,a),J(t,a,this._defsUsePending,!1,!1),Xo(a,e);var r=a.style,i=r.fontSize;i&&i<9&&(r.fontSize=9,a.scaleX*=i/9,a.scaleY*=i/9);var o=(r.fontSize||r.fontFamily)&&[r.fontStyle,r.fontWeight,(r.fontSize||12)+"px",r.fontFamily||"sans-serif"].join(" ");r.font=o;var s=a.getBoundingRect();return this._textX+=s.width,e.add(a),a},n.internalField=function(){wt={g:function(t,e){var a=new Y;return W(e,a),J(t,a,this._defsUsePending,!1,!1),a},rect:function(t,e){var a=new Ee;return W(e,a),J(t,a,this._defsUsePending,!1,!1),a.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),a.silent=!0,a},circle:function(t,e){var a=new Gr;return W(e,a),J(t,a,this._defsUsePending,!1,!1),a.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),a.silent=!0,a},line:function(t,e){var a=new si;return W(e,a),J(t,a,this._defsUsePending,!1,!1),a.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),a.silent=!0,a},ellipse:function(t,e){var a=new li;return W(e,a),J(t,a,this._defsUsePending,!1,!1),a.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),a.silent=!0,a},polygon:function(t,e){var a=t.getAttribute("points"),r;a&&(r=Ea(a));var i=new Yt({shape:{points:r||[]},silent:!0});return W(e,i),J(t,i,this._defsUsePending,!1,!1),i},polyline:function(t,e){var a=t.getAttribute("points"),r;a&&(r=Ea(a));var i=new Bt({shape:{points:r||[]},silent:!0});return W(e,i),J(t,i,this._defsUsePending,!1,!1),i},image:function(t,e){var a=new kr;return W(e,a),J(t,a,this._defsUsePending,!1,!1),a.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),a.silent=!0,a},text:function(t,e){var a=t.getAttribute("x")||"0",r=t.getAttribute("y")||"0",i=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0";this._textX=parseFloat(a)+parseFloat(i),this._textY=parseFloat(r)+parseFloat(o);var s=new Y;return W(e,s),J(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,e){var a=t.getAttribute("x"),r=t.getAttribute("y");a!=null&&(this._textX=parseFloat(a)),r!=null&&(this._textY=parseFloat(r));var i=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0",s=new Y;return W(e,s),J(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(o),s},path:function(t,e){var a=t.getAttribute("d")||"",r=ui(a);return W(e,r),J(t,r,this._defsUsePending,!1,!1),r.silent=!0,r}}}(),n}(),Fa={lineargradient:function(n){var t=parseInt(n.getAttribute("x1")||"0",10),e=parseInt(n.getAttribute("y1")||"0",10),a=parseInt(n.getAttribute("x2")||"10",10),r=parseInt(n.getAttribute("y2")||"0",10),i=new Er(t,e,a,r);return Ga(n,i),ka(n,i),i},radialgradient:function(n){var t=parseInt(n.getAttribute("cx")||"0",10),e=parseInt(n.getAttribute("cy")||"0",10),a=parseInt(n.getAttribute("r")||"0",10),r=new ci(t,e,a);return Ga(n,r),ka(n,r),r}};function Ga(n,t){var e=n.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(t.global=!0)}function ka(n,t){for(var e=n.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var a=e.getAttribute("offset"),r=void 0;a&&a.indexOf("%")>0?r=parseInt(a,10)/100:a?r=parseFloat(a):r=0;var i={};un(e,i,i);var o=i.stopColor||e.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:r,color:o})}e=e.nextSibling}}function W(n,t){n&&n.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),Fr(t.__inheritedStyle,n.__inheritedStyle))}function Ea(n){for(var t=lt(n),e=[],a=0;a<t.length;a+=2){var r=parseFloat(t[a]),i=parseFloat(t[a+1]);e.push([r,i])}return e}function J(n,t,e,a,r){var i=t,o=i.__inheritedStyle=i.__inheritedStyle||{},s={};n.nodeType===1&&(qo(n,t),un(n,o,s),a||Qo(n,o,s)),i.style=i.style||{},o.fill!=null&&(i.style.fill=za(i,"fill",o.fill,e)),o.stroke!=null&&(i.style.stroke=za(i,"stroke",o.stroke,e)),b(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(i.style[l]=parseFloat(o[l]))}),b(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(i.style[l]=o[l])}),r&&(i.__selfStyle=s),o.lineDash&&(i.style.lineDash=se(lt(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(i.invisible=!0),o.display==="none"&&(i.ignore=!0)}function Xo(n,t){var e=t.__selfStyle;if(e){var a=e.textBaseline,r=a;!a||a==="auto"||a==="baseline"?r="alphabetic":a==="before-edge"||a==="text-before-edge"?r="top":a==="after-edge"||a==="text-after-edge"?r="bottom":(a==="central"||a==="mathematical")&&(r="middle"),n.style.textBaseline=r}var i=t.__inheritedStyle;if(i){var o=i.textAlign,s=o;o&&(o==="middle"&&(s="center"),n.style.textAlign=s)}}var Jo=/^url\(\s*#(.*?)\)/;function za(n,t,e,a){var r=e&&e.match(Jo);if(r){var i=fi(r[1]);a.push([n,t,i]);return}return e==="none"&&(e=null),e}function Zo(n,t){for(var e=0;e<t.length;e++){var a=t[e];a[0].style[a[1]]=n[a[2]]}}var Wo=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function lt(n){return n.match(Wo)||[]}var Ko=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Mt=Math.PI/180;function qo(n,t){var e=n.getAttribute("transform");if(e){e=e.replace(/,/g," ");var a=[],r=null;e.replace(Ko,function(f,v,p){return a.push(v,p),""});for(var i=a.length-1;i>0;i-=2){var o=a[i],s=a[i-1],l=lt(o);switch(r=r||zr(),s){case"translate":hi(r,r,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":vi(r,r,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":pi(r,r,-parseFloat(l[0])*Mt);break;case"skewX":var u=Math.tan(parseFloat(l[0])*Mt);At(r,[1,0,u,1,0,0],r);break;case"skewY":var c=Math.tan(parseFloat(l[0])*Mt);At(r,[1,c,0,1,0,0],r);break;case"matrix":r[0]=parseFloat(l[0]),r[1]=parseFloat(l[1]),r[2]=parseFloat(l[2]),r[3]=parseFloat(l[3]),r[4]=parseFloat(l[4]),r[5]=parseFloat(l[5]);break}}t.setLocalTransform(r)}}var Na=/([^\s:;]+)\s*:\s*([^:;]+)/g;function un(n,t,e){var a=n.getAttribute("style");if(a){Na.lastIndex=0;for(var r;(r=Na.exec(a))!=null;){var i=r[1],o=ze(at,i)?at[i]:null;o&&(t[o]=r[2]);var s=ze(rt,i)?rt[i]:null;s&&(e[s]=r[2])}}}function Qo(n,t,e){for(var a=0;a<Pa.length;a++){var r=Pa[a],i=n.getAttribute(r);i!=null&&(t[at[r]]=i)}for(var a=0;a<Oa.length;a++){var r=Oa[a],i=n.getAttribute(r);i!=null&&(e[rt[r]]=i)}}function cn(n,t){var e=t.width/n.width,a=t.height/n.height,r=Math.min(e,a);return{scale:r,x:-(n.x+n.width/2)*r+(t.x+t.width/2),y:-(n.y+n.height/2)*r+(t.y+t.height/2)}}function es(n,t){var e=new Yo;return e.parse(n,t)}var ts=B(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),as=function(){function n(t,e){this.type="geoSVG",this._usedGraphicMap=B(),this._freedGraphics=[],this._mapName=t,this._parsedXML=ln(e)}return n.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=ns(t.named),a=e.regions,r=e.regionsMap;this._regions=a,this._regionsMap=r}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(t){var e,a;try{e=t&&es(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},a=e.root,Nr(a!=null)}catch(d){throw new Error(`Invalid svg format
`+d.message)}var r=new Y;r.add(a),r.isGeoSVGGraphicRoot=!0;var i=e.width,o=e.height,s=e.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,c=void 0,f=void 0,v=void 0;if(i!=null?(u=0,f=i):s&&(u=s.x,f=s.width),o!=null?(c=0,v=o):s&&(c=s.y,v=s.height),u==null||c==null){var p=a.getBoundingRect();u==null&&(u=p.x,f=p.width),c==null&&(c=p.y,v=p.height)}l=this._boundingRect=new ue(u,c,f,v)}if(s){var h=cn(s,l);a.scaleX=a.scaleY=h.scale,a.x=h.x,a.y=h.y}r.setClipPath(new Ee({shape:l.plain()}));var g=[];return b(e.named,function(d){ts.get(d.svgNodeTagLower)!=null&&(g.push(d),rs(d.el))}),{root:r,boundingRect:l,named:g}},n.prototype.useGraphic=function(t){var e=this._usedGraphicMap,a=e.get(t);return a||(a=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,a),a)},n.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,a=e.get(t);a&&(e.removeKey(t),this._freedGraphics.push(a))},n}();function rs(n){n.silent=!1,n.isGroup&&n.traverse(function(t){t.silent=!1})}function ns(n){var t=[],e=B();return b(n,function(a){if(a.namedFrom==null){var r=new So(a.name,a.el);t.push(r),e.set(a.name,r)}}),{regions:t,regionsMap:e}}var Rt=[126,25],Ha="南海诸岛",ve=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var pe=0;pe<ve.length;pe++)for(var Me=0;Me<ve[pe].length;Me++)ve[pe][Me][0]/=10.5,ve[pe][Me][1]/=-10.5/.75,ve[pe][Me][0]+=Rt[0],ve[pe][Me][1]+=Rt[1];function is(n,t){if(n==="china"){for(var e=0;e<t.length;e++)if(t[e].name===Ha)return;t.push(new en(Ha,se(ve,function(a){return{type:"polygon",exterior:a}}),Rt))}}var os={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function ss(n,t){if(n==="china"){var e=os[t.name];if(e){var a=t.getCenter();a[0]+=e[0]/10.5,a[1]+=-e[1]/(10.5/.75),t.setCenter(a)}}}var ls=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function us(n,t){n==="china"&&t.name==="台湾"&&t.geometries.push({type:"polygon",exterior:ls[0]})}var cs="name",fs=function(){function n(t,e,a){this.type="geoJSON",this._parsedMap=B(),this._mapName=t,this._specialAreas=a,this._geoJSON=vs(e)}return n.prototype.load=function(t,e){e=e||cs;var a=this._parsedMap.get(e);if(!a){var r=this._parseToRegions(e);a=this._parsedMap.set(e,{regions:r,boundingRect:ps(r)})}var i=B(),o=[];return b(a.regions,function(s){var l=s.name;t&&ze(t,l)&&(s=s.cloneShallow(l=t[l])),o.push(s),i.set(l,s)}),{regions:o,boundingRect:a.boundingRect||new ue(0,0,0,0),regionsMap:i}},n.prototype._parseToRegions=function(t){var e=this._mapName,a=this._geoJSON,r;try{r=a?Mo(a,t):[]}catch(i){throw new Error(`Invalid geoJson format
`+i.message)}return is(e,r),b(r,function(i){var o=i.name;ss(e,i),us(e,i);var s=this._specialAreas&&this._specialAreas[o];s&&i.transformTo(s.left,s.top,s.width,s.height)},this),r},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function ps(n){for(var t,e=0;e<n.length;e++){var a=n[e].getBoundingRect();t=t||a.clone(),t.union(a)}return t}function vs(n){return ye(n)?typeof JSON<"u"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var Re=B();const le={registerMap:function(n,t,e){if(t.svg){var a=new as(n,t.svg);Re.set(n,a)}else{var r=t.geoJson||t.geoJSON;r&&!t.features?e=t.specialAreas:r=t;var a=new fs(n,r,e);Re.set(n,a)}},getGeoResource:function(n){return Re.get(n)},getMapForUser:function(n){var t=Re.get(n);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(n,t,e){var a=Re.get(n);if(a)return a.load(t,e)}};var qt=["rect","circle","line","ellipse","polygon","polyline","path"],hs=B(qt),ds=B(qt.concat(["g"])),gs=B(qt.concat(["g"])),fn=Rr();function Je(n){var t=n.getItemStyle(),e=n.get("areaColor");return e!=null&&(t.fill=e),t}function $a(n){var t=n.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var ms=function(){function n(t){var e=new Y;this.uid=di("ec_map_draw"),this._controller=new Ho(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new Y),e.add(this._svgGroup=new Y)}return n.prototype.draw=function(t,e,a,r,i){var o=t.mainType==="geo",s=t.getData&&t.getData();o&&e.eachComponent({mainType:"series",subType:"map"},function(_){!s&&_.getHostGeoModel()===t&&(s=_.getData())});var l=t.coordinateSystem,u=this._regionsGroup,c=this.group,f=l.getTransformInfo(),v=f.raw,p=f.roam,h=!u.childAt(0)||i;h?(c.x=p.x,c.y=p.y,c.scaleX=p.scaleX,c.scaleY=p.scaleY,c.dirty()):It(c,p,t);var g=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,d={api:a,geo:l,mapOrGeoModel:t,data:s,isVisualEncodedByVisualMap:g,isGeo:o,transformInfoRaw:v};l.resourceType==="geoJSON"?this._buildGeoJSON(d):l.resourceType==="geoSVG"&&this._buildSVG(d),this._updateController(t,e,a),this._updateMapSelectHandler(t,u,a,r)},n.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=B(),a=B(),r=this._regionsGroup,i=t.transformInfoRaw,o=t.mapOrGeoModel,s=t.data,l=t.geo.projection,u=l&&l.stream;function c(p,h){return h&&(p=h(p)),p&&[p[0]*i.scaleX+i.x,p[1]*i.scaleY+i.y]}function f(p){for(var h=[],g=!u&&l&&l.project,d=0;d<p.length;++d){var _=c(p[d],g);_&&h.push(_)}return h}function v(p){return{shape:{points:f(p)}}}r.removeAll(),b(t.geo.regions,function(p){var h=p.name,g=e.get(h),d=a.get(h)||{},_=d.dataIdx,w=d.regionModel;g||(g=e.set(h,new Y),r.add(g),_=s?s.indexOfName(h):null,w=t.isGeo?o.getRegionModel(h):s?s.getItemModel(_):null,a.set(h,{dataIdx:_,regionModel:w}));var S=[],M=[];b(p.geometries,function(V){if(V.type==="polygon"){var D=[V.exterior].concat(V.interiors||[]);u&&(D=Ja(D,u)),b(D,function(I){S.push(new Yt(v(I)))})}else{var C=V.points;u&&(C=Ja(C,u,!0)),b(C,function(I){M.push(new Bt(v(I)))})}});var x=c(p.getCenter(),l&&l.project);function T(V,D){if(V.length){var C=new _i({culling:!0,segmentIgnoreThreshold:1,shape:{paths:V}});g.add(C),Ba(t,C,_,w),Ua(t,C,h,w,o,_,x),D&&($a(C),b(C.states,$a))}}T(S),T(M,!0)}),e.each(function(p,h){var g=a.get(h),d=g.dataIdx,_=g.regionModel;ja(t,p,h,_,o,d),Ya(t,p,h,_,o),Xa(t,p,h,_,o)},this)},n.prototype._buildSVG=function(t){var e=t.geo.map,a=t.transformInfoRaw;this._svgGroup.x=a.x,this._svgGroup.y=a.y,this._svgGroup.scaleX=a.scaleX,this._svgGroup.scaleY=a.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var r=this._svgDispatcherMap=B(),i=!1;b(this._svgGraphicRecord.named,function(o){var s=o.name,l=t.mapOrGeoModel,u=t.data,c=o.svgNodeTagLower,f=o.el,v=u?u.indexOfName(s):null,p=l.getRegionModel(s);if(hs.get(c)!=null&&f instanceof va&&Ba(t,f,v,p),f instanceof va&&(f.culling=!0),f.z2EmphasisLift=0,!o.namedFrom&&(gs.get(c)!=null&&Ua(t,f,s,p,l,v,null),ja(t,f,s,p,l,v),Ya(t,f,s,p,l),ds.get(c)!=null)){var h=Xa(t,f,s,p,l);h==="self"&&(i=!0);var g=r.get(s)||r.set(s,[]);g.push(f)}},this),this._enableBlurEntireSVG(i,t)},n.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var a=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),r=a.opacity;this._svgGraphicRecord.root.traverse(function(i){if(!i.isGroup){Hr(i);var o=i.ensureState("blur").style||{};o.opacity==null&&r!=null&&(o.opacity=r),i.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(t,e){if(t==null)return[];var a=e.coordinateSystem;if(a.resourceType==="geoJSON"){var r=this._regionsGroupByName;if(r){var i=r.get(t);return i?[i]:[]}}else if(a.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},n.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},n.prototype._useSVG=function(t){var e=le.getGeoResource(t);if(e&&e.type==="geoSVG"){var a=e.useGraphic(this.uid);this._svgGroup.add(a.root),this._svgGraphicRecord=a,this._svgMapName=t}},n.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var e=le.getGeoResource(t);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(t,e,a){var r=t.coordinateSystem,i=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=r.getZoom(),i.enable(t.get("roam")||!1);var s=t.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=t.id,u}i.off("pan").on("pan",function(u){this._mouseDownFlag=!1,$o(o,u.dx,u.dy),a.dispatchAction(K(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),i.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,Bo(o,u.scale,u.originX,u.originY),a.dispatchAction(K(l(),{zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),i.setPointerChecker(function(u,c,f){return r.containPoint([c,f])&&!jo(u,a,t)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=fn(e).ignore)})},n.prototype._updateMapSelectHandler=function(t,e,a,r){var i=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){i._mouseDownFlag=!0}),e.on("click",function(o){i._mouseDownFlag&&(i._mouseDownFlag=!1)}))},n}();function Ba(n,t,e,a){var r=a.getModel("itemStyle"),i=a.getModel(["emphasis","itemStyle"]),o=a.getModel(["blur","itemStyle"]),s=a.getModel(["select","itemStyle"]),l=Je(r),u=Je(i),c=Je(s),f=Je(o),v=n.data;if(v){var p=v.getItemVisual(e,"style"),h=v.getItemVisual(e,"decal");n.isVisualEncodedByVisualMap&&p.fill&&(l.fill=p.fill),h&&(l.decal=gi(h,n.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=c,t.ensureState("blur").style=f,Hr(t)}function Ua(n,t,e,a,r,i,o){var s=n.data,l=n.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),i)),c=s&&s.getItemLayout(i);if(l||u||c&&c.showLabel){var f=l?e:i,v=void 0;(!s||i>=0)&&(v=r);var p=o?{normal:{align:"center",verticalAlign:"middle"}}:null;Ht(t,$t(a),{labelFetcher:v,labelDataIndex:f,defaultText:e},p);var h=t.getTextContent();if(h&&(fn(h).ignore=h.ignore,t.textConfig&&o)){var g=t.getBoundingRect().clone();t.textConfig.layoutRect=g,t.textConfig.position=[(o[0]-g.x)/g.width*100+"%",(o[1]-g.y)/g.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function ja(n,t,e,a,r,i){n.data?n.data.setItemGraphicEl(i,t):et(t).eventData={componentType:"geo",componentIndex:r.componentIndex,geoIndex:r.componentIndex,name:e,region:a&&a.option||{}}}function Ya(n,t,e,a,r){n.data||mi({el:t,componentModel:r,itemName:e,itemTooltipOption:a.get("tooltip")})}function Xa(n,t,e,a,r){t.highDownSilentOnTouch=!!r.get("selectedMode");var i=a.getModel("emphasis"),o=i.get("focus");return Dr(t,o,i.get("blurScope"),i.get("disabled")),n.isGeo&&yi(t,r,e),o}function Ja(n,t,e){var a=[],r;function i(){r=[]}function o(){r.length&&(a.push(r),r=[])}var s=t({polygonStart:i,polygonEnd:o,lineStart:i,lineEnd:o,point:function(l,u){isFinite(l)&&isFinite(u)&&r.push([l,u])},sphere:function(){}});return!e&&s.polygonStart(),b(n,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!e&&s.polygonEnd(),a}const pn=ms;var ys=function(n){N(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,r,i){if(!(i&&i.type==="mapToggleSelect"&&i.from===this.uid)){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&i&&i.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===e.id){var s=this._mapDraw;s&&o.add(s.group)}else if(e.needsDrawMap){var s=this._mapDraw||new pn(r);o.add(s.group),s.draw(e,a,r,this,i),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&a.getComponent("legend")&&this._renderSymbols(e,a,r)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,a,r){var i=e.originalData,o=this.group;i.each(i.mapDimension("value"),function(s,l){if(!isNaN(s)){var u=i.getItemLayout(l);if(!(!u||!u.point)){var c=u.point,f=u.offset,v=new Gr({style:{fill:e.getData().getVisual("style").fill},shape:{cx:c[0]+f*9,cy:c[1],r:3},silent:!0,z2:8+(f?0:bi+1)});if(!f){var p=e.mainSeries.getData(),h=i.getName(l),g=p.indexOfName(h),d=i.getItemModel(l),_=d.getModel("label"),w=p.getItemGraphicEl(g);Ht(v,$t(d),{labelFetcher:{getFormattedLabel:function(S,M){return e.getFormattedLabel(g,M)}},defaultText:h}),v.disableLabelAnimation=!0,_.get("position")||v.setTextConfig({position:"bottom"}),w.onHoverStateChange=function(S){Si(v,S)}}o.add(v)}}})},t.type="map",t}(Vr);const _s=ys;var bs=function(n){N(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(a){if(a!=null){var r=this.getData().getName(a),i=this.coordinateSystem,o=i.getRegion(r);return o&&i.dataToPoint(o.getCenter())}},e}return t.prototype.getInitialData=function(e){for(var a=on(this,{coordDimensions:["value"],encodeDefaulter:Ut(Lr,this)}),r=B(),i=[],o=0,s=a.count();o<s;o++){var l=a.getName(o);r.set(l,!0)}var u=le.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return b(u.regions,function(c){var f=c.name;r.get(f)||i.push(f)}),a.appendValues([],i),a},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var a=this.getData();return a.get(a.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var a=this.getData();return a.getItemModel(a.indexOfName(e))},t.prototype.formatTooltip=function(e,a,r){for(var i=this.getData(),o=this.getRawValue(e),s=i.getName(e),l=this.seriesGroup,u=[],c=0;c<l.length;c++){var f=l[c].originalData.indexOfName(s),v=i.mapDimension("value");isNaN(l[c].originalData.get(v,f))||u.push(l[c].name)}return ha("section",{header:u.join(", "),noHeader:!u.length,blocks:[ha("nameValue",{name:s,value:o})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var a=e.icon||"roundRect",r=tt(a,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return r.setStyle(e.itemStyle),r.style.stroke="none",a.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(Ir);const Ss=bs;function ws(n,t){var e={};return b(n,function(a){a.each(a.mapDimension("value"),function(r,i){var o="ec-"+a.getName(i);e[o]=e[o]||[],isNaN(r)||e[o].push(r)})}),n[0].map(n[0].mapDimension("value"),function(a,r){for(var i="ec-"+n[0].getName(r),o=0,s=1/0,l=-1/0,u=e[i].length,c=0;c<u;c++)s=Math.min(s,e[i][c]),l=Math.max(l,e[i][c]),o+=e[i][c];var f;return t==="min"?f=s:t==="max"?f=l:t==="average"?f=o/u:f=o,u===0?NaN:f})}function Ms(n){var t={};n.eachSeriesByType("map",function(e){var a=e.getHostGeoModel(),r=a?"o"+a.id:"i"+e.getMapType();(t[r]=t[r]||[]).push(e)}),b(t,function(e,a){for(var r=ws(se(e,function(o){return o.getData()}),e[0].get("mapValueCalculation")),i=0;i<e.length;i++)e[i].originalData=e[i].getData();for(var i=0;i<e.length;i++)e[i].seriesGroup=e,e[i].needsDrawMap=i===0&&!e[i].getHostGeoModel(),e[i].setData(r.cloneShallow()),e[i].mainSeries=e[0]})}function xs(n){var t={};n.eachSeriesByType("map",function(e){var a=e.getMapType();if(!(e.getHostGeoModel()||t[a])){var r={};b(e.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&n.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,c){var f=l.getName(c),v=s.getRegion(f);if(!(!v||isNaN(u))){var p=r[f]||0,h=s.dataToPoint(v.getCenter());r[f]=p+1,l.setItemLayout(c,{point:h,offset:p})}})});var i=e.getData();i.each(function(o){var s=i.getName(o),l=i.getItemLayout(o)||{};l.showLabel=!r[s],i.setItemLayout(o,l)}),t[a]=!0}})}var Za=Ge,Ts=function(n){N(t,n);function t(e){var a=n.call(this)||this;return a.type="view",a.dimensions=["x","y"],a._roamTransformable=new Ye,a._rawTransformable=new Ye,a.name=e,a}return t.prototype.setBoundingRect=function(e,a,r,i){return this._rect=new ue(e,a,r,i),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,a,r,i){this._transformTo(e,a,r,i),this._viewRect=new ue(e,a,r,i)},t.prototype._transformTo=function(e,a,r,i){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new ue(e,a,r,i));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(e,a){e&&(this._center=[j(e[0],a.getWidth()),j(e[1],a.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var a=this.zoomLimit;a&&(a.max!=null&&(e=Math.min(a.max,e)),a.min!=null&&(e=Math.max(a.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),a=e.x+e.width/2,r=e.y+e.height/2;return[a,r]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),a=this._roamTransformable,r=this.getDefaultCenter(),i=this.getCenter(),o=this.getZoom();i=Ge([],i,e),r=Ge([],r,e),a.originX=i[0],a.originY=i[1],a.x=r[0]-i[0],a.y=r[1]-i[1],a.scaleX=a.scaleY=o,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,a=this._rawTransformable;a.parent=e,e.updateTransform(),a.updateTransform(),wi(this.transform||(this.transform=[]),a.transform||zr()),this._rawTransform=a.getLocalTransform(),this.invTransform=this.invTransform||[],wr(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,a=this._roamTransformable,r=new Ye;return r.transform=a.transform,r.decomposeTransform(),{roam:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,a,r){var i=a?this._rawTransform:this.transform;return r=r||[],i?Za(r,e,i):Mi(r,e)},t.prototype.pointToData=function(e){var a=this.invTransform;return a?Za([],e,a):[e[0],e[1]]},t.prototype.convertToPixel=function(e,a,r){var i=Wa(a);return i===this?i.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,a,r){var i=Wa(a);return i===this?i.pointToData(r):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(Ye);function Wa(n){var t=n.seriesModel;return t?t.coordinateSystem:null}const vn=Ts;var Ds={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},hn=["lng","lat"],dn=function(n){N(t,n);function t(e,a,r){var i=n.call(this,e)||this;i.dimensions=hn,i.type="geo",i._nameCoordMap=B(),i.map=a;var o=r.projection,s=le.load(a,r.nameMap,r.nameProperty),l=le.getGeoResource(a);i.resourceType=l?l.type:null;var u=i.regions=s.regions,c=Ds[l.type];i._regionsMap=s.regionsMap,i.regions=s.regions,i.projection=o;var f;if(o)for(var v=0;v<u.length;v++){var p=u[v].getBoundingRect(o);f=f||p.clone(),f.union(p)}else f=s.boundingRect;return i.setBoundingRect(f.x,f.y,f.width,f.height),i.aspectScale=o?1:xi(r.aspectScale,c.aspectScale),i._invertLongitute=o?!1:c.invertLongitute,i}return t.prototype._transformTo=function(e,a,r,i){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new ue(e,a,r,i));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var a=this.regions,r=0;r<a.length;r++){var i=a[r];if(i.type==="geoJSON"&&i.contain(e))return a[r]}},t.prototype.addGeoCoord=function(e,a){this._nameCoordMap.set(e,a)},t.prototype.getGeoCoord=function(e){var a=this._regionsMap.get(e);return this._nameCoordMap.get(e)||a&&a.getCenter()},t.prototype.dataToPoint=function(e,a,r){if(ye(e)&&(e=this.getGeoCoord(e)),e){var i=this.projection;return i&&(e=i.project(e)),e&&this.projectedToPoint(e,a,r)}},t.prototype.pointToData=function(e){var a=this.projection;return a&&(e=a.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(e){return n.prototype.pointToData.call(this,e)},t.prototype.projectedToPoint=function(e,a,r){return n.prototype.dataToPoint.call(this,e,a,r)},t.prototype.convertToPixel=function(e,a,r){var i=Ka(a);return i===this?i.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,a,r){var i=Ka(a);return i===this?i.pointToData(r):null},t}(vn);Ti(dn,vn);function Ka(n){var t=n.geoModel,e=n.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",Di).models[0]||{}).coordinateSystem:null}const qa=dn;function Qa(n,t){var e=n.get("boundingCoords");if(e!=null){var a=e[0],r=e[1];if(isFinite(a[0])&&isFinite(a[1])&&isFinite(r[0])&&isFinite(r[1])){var i=this.projection;if(i){var o=a[0],s=a[1],l=r[0],u=r[1];a=[1/0,1/0],r=[-1/0,-1/0];var c=function(T,V,D,C){for(var I=D-T,G=C-V,R=0;R<=100;R++){var E=R/100,O=i.project([T+I*E,V+G*E]);Mr(a,a,O),xr(r,r,O)}};c(o,s,l,s),c(l,s,l,u),c(l,u,o,u),c(o,u,l,s)}this.setBoundingRect(a[0],a[1],r[0]-a[0],r[1]-a[1])}}var f=this.getBoundingRect(),v=n.get("layoutCenter"),p=n.get("layoutSize"),h=t.getWidth(),g=t.getHeight(),d=f.width/f.height*this.aspectScale,_=!1,w,S;v&&p&&(w=[j(v[0],h),j(v[1],g)],S=j(p,Math.min(h,g)),!isNaN(w[0])&&!isNaN(w[1])&&!isNaN(S)&&(_=!0));var M;if(_)M={},d>1?(M.width=S,M.height=S/d):(M.height=S,M.width=S*d),M.y=w[1]-M.height/2,M.x=w[0]-M.width/2;else{var x=n.getBoxLayoutParams();x.aspect=d,M=Nt(x,{width:h,height:g})}this.setViewRect(M.x,M.y,M.width,M.height),this.setCenter(n.get("center"),t),this.setZoom(n.get("zoom"))}function Cs(n,t){b(t.get("geoCoord"),function(e,a){n.addGeoCoord(a,e)})}var Vs=function(){function n(){this.dimensions=hn}return n.prototype.create=function(t,e){var a=[];function r(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}t.eachComponent("geo",function(o,s){var l=o.get("map"),u=new qa(l+s,l,K({nameMap:o.get("nameMap")},r(o)));u.zoomLimit=o.get("scaleLimit"),a.push(u),o.coordinateSystem=u,u.model=o,u.resize=Qa,u.resize(o,e)}),t.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=a[l]}});var i={};return t.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();i[s]=i[s]||[],i[s].push(o)}}),b(i,function(o,s){var l=se(o,function(c){return c.get("nameMap")}),u=new qa(s,s,K({nameMap:Ci(l)},r(o[0])));u.zoomLimit=$r.apply(null,se(o,function(c){return c.get("scaleLimit")})),a.push(u),u.resize=Qa,u.resize(o[0],e),b(o,function(c){c.coordinateSystem=u,Cs(u,c)})}),a},n.prototype.getFilledRegions=function(t,e,a,r){for(var i=(t||[]).slice(),o=B(),s=0;s<i.length;s++)o.set(i[s].name,i[s]);var l=le.load(e,a,r);return b(l.regions,function(u){var c=u.name;!o.get(c)&&i.push({name:c})}),i},n}(),Ls=new Vs;const gn=Ls;var As=function(n){N(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a,r){var i=le.getGeoResource(e.map);if(i&&i.type==="geoJSON"){var o=e.itemStyle=e.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(e,r),Ar(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,a=this.option;a.regions=gn.getFilledRegions(a.regions,a.map,a.nameMap,a.nameProperty);var r={};this._optionModelMap=Vi(a.regions||[],function(i,o){var s=o.name;return s&&(i.set(s,new da(o,e,e.ecModel)),o.selected&&(r[s]=!0)),i},B()),a.selectedMap||(a.selectedMap=r)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new da(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,a){var r=this.getRegionModel(e),i=a==="normal"?r.get(["label","formatter"]):r.get(["emphasis","label","formatter"]),o={name:e};if(Br(i))return o.status=a,i(o);if(ye(i))return i.replace("{a}",e!=null?e:"")},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var a=this.option,r=a.selectedMode;if(r){r!=="multiple"&&(a.selectedMap=null);var i=a.selectedMap||(a.selectedMap={});i[e]=!0}},t.prototype.unSelect=function(e){var a=this.option.selectedMap;a&&(a[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var a=this.option.selectedMap;return!!(a&&a[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(Ur);const Is=As;function er(n,t){return n.pointToProjected?n.pointToProjected(t):n.pointToData(t)}function Rs(n,t,e,a){var r=n.getZoom(),i=n.getCenter(),o=t.zoom,s=n.projectedToPoint?n.projectedToPoint(i):n.dataToPoint(i);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,n.setCenter(er(n,s),a)),o!=null){if(e){var l=e.min||0,u=e.max||1/0;o=Math.max(Math.min(r*o,u),l)/r}n.scaleX*=o,n.scaleY*=o;var c=(t.originX-n.x)*(o-1),f=(t.originY-n.y)*(o-1);n.x-=c,n.y-=f,n.updateTransform(),n.setCenter(er(n,s),a),n.setZoom(o*r)}return{center:n.getCenter(),zoom:n.getZoom()}}var Ps=function(n){N(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.focusBlurEnabled=!0,e}return t.prototype.init=function(e,a){this._api=a},t.prototype.render=function(e,a,r,i){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new pn(r));var o=this._mapDraw;o.draw(e,a,r,this,i),o.group.on("click",this._handleRegionClick,this),o.group.silent=e.get("silent"),this.group.add(o.group),this.updateSelectStatus(e,a,r)},t.prototype._handleRegionClick=function(e){var a;jr(e.target,function(r){return(a=et(r).eventData)!=null},!0),a&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:a.name})},t.prototype.updateSelectStatus=function(e,a,r){var i=this;this._mapDraw.group.traverse(function(o){var s=et(o).eventData;if(s)return i._model.isSelected(s.name)?r.enterSelect(o):r.leaveSelect(o),!0})},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(Yr);const Os=Ps;function Fs(n,t,e){le.registerMap(n,t,e)}function mn(n){n.registerCoordinateSystem("geo",gn),n.registerComponentModel(Is),n.registerComponentView(Os),n.registerImpl("registerMap",Fs),n.registerImpl("getMap",function(e){return le.getMapForUser(e)});function t(e,a){a.update="geo:updateSelectStatus",n.registerAction(a,function(r,i){var o={},s=[];return i.eachComponent({mainType:"geo",query:r},function(l){l[e](r.name);var u=l.coordinateSystem;b(u.regions,function(f){o[f.name]=l.isSelected(f.name)||!1});var c=[];b(o,function(f,v){o[v]&&c.push(v)}),s.push({geoIndex:l.componentIndex,name:c})}),{selected:o,allSelected:s,name:r.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,a,r){var i=e.componentType||"series";a.eachComponent({mainType:i,query:e},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=Rs(s,e,o.get("scaleLimit"),r);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),i==="series"&&b(o.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function Gs(n){Ne(mn),n.registerChartView(_s),n.registerSeriesModel(Ss),n.registerLayout(xs),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Ms),Pr("map",n.registerAction)}var He=b,ks=de,nt=-1,Qt=function(){function n(t){var e=t.mappingMethod,a=t.type,r=this.option=Q(t);this.type=a,this.mappingMethod=e,this._normalizeData=Ns[e];var i=n.visualHandlers[a];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[e],e==="piecewise"?(xt(r),Es(r)):e==="category"?r.categories?zs(r):xt(r,!0):(Nr(e!=="linear"||r.dataExtent),xt(r))}return n.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},n.prototype.getNormalizer=function(){return z(this._normalizeData,this)},n.listVisualTypes=function(){return jt(n.visualHandlers)},n.isValidType=function(t){return n.visualHandlers.hasOwnProperty(t)},n.eachVisual=function(t,e,a){de(t)?b(t,e,a):e.call(a,t)},n.mapVisual=function(t,e,a){var r,i=Z(t)?[]:de(t)?{}:(r=!0,null);return n.eachVisual(t,function(o,s){var l=e.call(a,o,s);r?i=l:i[s]=l}),i},n.retrieveVisuals=function(t){var e={},a;return t&&He(n.visualHandlers,function(r,i){t.hasOwnProperty(i)&&(e[i]=t[i],a=!0)}),a?e:null},n.prepareVisualTypes=function(t){if(Z(t))t=t.slice();else if(ks(t)){var e=[];He(t,function(a,r){e.push(r)}),t=e}else return[];return t.sort(function(a,r){return r==="color"&&a!=="color"&&a.indexOf("color")===0?1:-1}),t},n.dependsOn=function(t,e){return e==="color"?!!(t&&t.indexOf(e)===0):t===e},n.findPieceIndex=function(t,e,a){for(var r,i=1/0,o=0,s=e.length;o<s;o++){var l=e[o].value;if(l!=null){if(l===t||ye(l)&&l===t+"")return o;a&&v(l,o)}}for(var o=0,s=e.length;o<s;o++){var u=e[o],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(We(f[1],t,c[1]))return o}else if(c[1]===1/0){if(We(f[0],c[0],t))return o}else if(We(f[0],c[0],t)&&We(f[1],t,c[1]))return o;a&&v(c[0],o),a&&v(c[1],o)}}if(a)return t===1/0?e.length-1:t===-1/0?0:r;function v(p,h){var g=Math.abs(p-t);g<i&&(i=g,r=h)}},n.visualHandlers={color:{applyVisual:Pe("color"),getColorMapper:function(){var t=this.option;return z(t.mappingMethod==="category"?function(e,a){return!a&&(e=this._normalizeData(e)),Fe.call(this,e)}:function(e,a,r){var i=!!r;return!a&&(e=this._normalizeData(e)),r=vt(e,t.parsedVisual,r),i?r:ht(r,"rgba")},this)},_normalizedToVisual:{linear:function(t){return ht(vt(t,this.option.parsedVisual),"rgba")},category:Fe,piecewise:function(t,e){var a=Ot.call(this,e);return a==null&&(a=ht(vt(t,this.option.parsedVisual),"rgba")),a},fixed:he}},colorHue:Ze(function(t,e){return dt(t,e)}),colorSaturation:Ze(function(t,e){return dt(t,null,e)}),colorLightness:Ze(function(t,e){return dt(t,null,null,e)}),colorAlpha:Ze(function(t,e){return Ai(t,e)}),decal:{applyVisual:Pe("decal"),_normalizedToVisual:{linear:null,category:Fe,piecewise:null,fixed:null}},opacity:{applyVisual:Pe("opacity"),_normalizedToVisual:Pt([0,1])},liftZ:{applyVisual:Pe("liftZ"),_normalizedToVisual:{linear:he,category:he,piecewise:he,fixed:he}},symbol:{applyVisual:function(t,e,a){var r=this.mapValueToVisual(t);a("symbol",r)},_normalizedToVisual:{linear:tr,category:Fe,piecewise:function(t,e){var a=Ot.call(this,e);return a==null&&(a=tr.call(this,t)),a},fixed:he}},symbolSize:{applyVisual:Pe("symbolSize"),_normalizedToVisual:Pt([0,1])}},n}();function Es(n){var t=n.pieceList;n.hasSpecialVisual=!1,b(t,function(e,a){e.originIndex=a,e.visual!=null&&(n.hasSpecialVisual=!0)})}function zs(n){var t=n.categories,e=n.categoryMap={},a=n.visual;if(He(t,function(o,s){e[o]=s}),!Z(a)){var r=[];de(a)?He(a,function(o,s){var l=e[s];r[l!=null?l:nt]=o}):r[nt]=a,a=yn(n,r)}for(var i=t.length-1;i>=0;i--)a[i]==null&&(delete e[t[i]],t.pop())}function xt(n,t){var e=n.visual,a=[];de(e)?He(e,function(i){a.push(i)}):e!=null&&a.push(e);var r={color:1,symbol:1};!t&&a.length===1&&!r.hasOwnProperty(n.type)&&(a[1]=a[0]),yn(n,a)}function Ze(n){return{applyVisual:function(t,e,a){var r=this.mapValueToVisual(t);a("color",n(e("color"),r))},_normalizedToVisual:Pt([0,1])}}function tr(n){var t=this.option.visual;return t[Math.round(ce(n,[0,1],[0,t.length-1],!0))]||{}}function Pe(n){return function(t,e,a){a(n,this.mapValueToVisual(t))}}function Fe(n){var t=this.option.visual;return t[this.option.loop&&n!==nt?n%t.length:n]}function he(){return this.option.visual[0]}function Pt(n){return{linear:function(t){return ce(t,n,this.option.visual,!0)},category:Fe,piecewise:function(t,e){var a=Ot.call(this,e);return a==null&&(a=ce(t,n,this.option.visual,!0)),a},fixed:he}}function Ot(n){var t=this.option,e=t.pieceList;if(t.hasSpecialVisual){var a=Qt.findPieceIndex(n,e),r=e[a];if(r&&r.visual)return r.visual[this.type]}}function yn(n,t){return n.visual=t,n.type==="color"&&(n.parsedVisual=se(t,function(e){var a=Li(e);return a||[0,0,0,1]})),t}var Ns={linear:function(n){return ce(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var t=this.option.pieceList,e=Qt.findPieceIndex(n,t,!0);if(e!=null)return ce(e,[0,t.length-1],[0,1],!0)},category:function(n){var t=this.option.categories?this.option.categoryMap[n]:n;return t==null?nt:t},fixed:Or};function We(n,t,e){return n?t<=e:t<e}const X=Qt;function Hs(n,t,e,a,r,i){n=n||0;var o=e[1]-e[0];if(r!=null&&(r=xe(r,[0,o])),i!=null&&(i=Math.max(i,r!=null?r:0)),a==="all"){var s=Math.abs(t[1]-t[0]);s=xe(s,[0,o]),r=i=xe(s,[r,i]),a=0}t[0]=xe(t[0],e),t[1]=xe(t[1],e);var l=Tt(t,a);t[a]+=n;var u=r||0,c=e.slice();l.sign<0?c[0]+=u:c[1]-=u,t[a]=xe(t[a],c);var f;return f=Tt(t,a),r!=null&&(f.sign!==l.sign||f.span<r)&&(t[1-a]=t[a]+l.sign*r),f=Tt(t,a),i!=null&&f.span>i&&(t[1-a]=t[a]+f.sign*i),t}function Tt(n,t){var e=n[t]-n[1-t];return{span:Math.abs(e),sign:e>0?-1:e<0?1:t?-1:1}}function xe(n,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,n))}var ar=b;function rr(n){if(n){for(var t in n)if(n.hasOwnProperty(t))return!0}}function nr(n,t,e){var a={};return ar(t,function(i){var o=a[i]=r();ar(n[i],function(s,l){if(X.isValidType(l)){var u={type:l,visual:s};e&&e(u,i),o[l]=new X(u),l==="opacity"&&(u=Q(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new X(u))}})}),a;function r(){var i=function(){};i.prototype.__hidden=i.prototype;var o=new i;return o}}function $s(n,t,e){var a;b(e,function(r){t.hasOwnProperty(r)&&rr(t[r])&&(a=!0)}),a&&b(e,function(r){t.hasOwnProperty(r)&&rr(t[r])?n[r]=Q(t[r]):delete n[r]})}function Bs(n,t,e,a){var r={};return b(n,function(i){var o=X.prepareVisualTypes(t[i]);r[i]=o}),{progress:function(o,s){var l;a!=null&&(l=s.getDimensionIndex(a));function u(x){return Ii(s,f,x)}function c(x,T){Ri(s,f,x,T)}for(var f,v=s.getStore();(f=o.next())!=null;){var p=s.getRawDataItem(f);if(!(p&&p.visualMap===!1))for(var h=a!=null?v.get(l,f):f,g=e(h),d=t[g],_=r[g],w=0,S=_.length;w<S;w++){var M=_[w];d[M]&&d[M].applyVisual(h,u,c)}}}}}var Us={get:function(n,t,e){var a=Q((js[n]||{})[t]);return e&&Z(a)?a[a.length-1]:a}},js={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const _n=Us;var ir=X.mapVisual,Ys=X.eachVisual,Xs=Z,or=b,Js=Xr,Zs=ce,Ws=function(n){N(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return t.prototype.init=function(e,a,r){this.mergeDefaultAndTheme(e,r)},t.prototype.optionUpdated=function(e,a){var r=this.option;!a&&$s(r,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var a=this.stateList;e=z(e,this),this.controllerVisuals=nr(this.option.controller,a,e),this.targetVisuals=nr(this.option.target,a,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,a=[];return e==null||e==="all"?this.ecModel.eachSeries(function(r,i){a.push(i)}):a=Pi(e),a},t.prototype.eachTargetSeries=function(e,a){b(this.getTargetSeriesIndices(),function(r){var i=this.ecModel.getSeriesByIndex(r);i&&e.call(a,i)},this)},t.prototype.isTargetSeries=function(e){var a=!1;return this.eachTargetSeries(function(r){r===e&&(a=!0)}),a},t.prototype.formatValueText=function(e,a,r){var i=this.option,o=i.precision,s=this.dataBound,l=i.formatter,u;r=r||["<",">"],Z(e)&&(e=e.slice(),u=!0);var c=a?e:u?[f(e[0]),f(e[1])]:f(e);if(ye(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(Br(l))return u?l(e[0],e[1]):l(e);if(u)return e[0]===s[0]?r[0]+" "+c[1]:e[1]===s[1]?r[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(v){return v===s[0]?"min":v===s[1]?"max":(+v).toFixed(Math.min(o,20))}},t.prototype.resetExtent=function(){var e=this.option,a=Js([e.min,e.max]);this._dataExtent=a},t.prototype.getDataDimensionIndex=function(e){var a=this.option.dimension;if(a!=null)return e.getDimensionIndex(a);for(var r=e.dimensions,i=r.length-1;i>=0;i--){var o=r[i],s=e.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,a=this.option,r={inRange:a.inRange,outOfRange:a.outOfRange},i=a.target||(a.target={}),o=a.controller||(a.controller={});ga(i,r),ga(o,r);var s=this.isCategory();l.call(this,i),l.call(this,o),u.call(this,i,"inRange","outOfRange"),c.call(this,o);function l(f){Xs(a.color)&&!f.inRange&&(f.inRange={color:a.color.slice().reverse()}),f.inRange=f.inRange||{color:e.get("gradientColor")}}function u(f,v,p){var h=f[v],g=f[p];h&&!g&&(g=f[p]={},or(h,function(d,_){if(X.isValidType(_)){var w=_n.get(_,"inactive",s);w!=null&&(g[_]=w,_==="color"&&!g.hasOwnProperty("opacity")&&!g.hasOwnProperty("colorAlpha")&&(g.opacity=[0,0]))}}))}function c(f){var v=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,p=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,h=this.get("inactiveColor"),g=this.getItemSymbol(),d=g||"roundRect";or(this.stateList,function(_){var w=this.itemSize,S=f[_];S||(S=f[_]={color:s?h:[h]}),S.symbol==null&&(S.symbol=v&&Q(v)||(s?d:[d])),S.symbolSize==null&&(S.symbolSize=p&&Q(p)||(s?w[0]:[w[0],w[0]])),S.symbol=ir(S.symbol,function(T){return T==="none"?d:T});var M=S.symbolSize;if(M!=null){var x=-1/0;Ys(M,function(T){T>x&&(x=T)}),S.symbolSize=ir(M,function(T){return Zs(T,[0,x],[0,w[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Ur);const it=Ws;var sr=[20,140],Ks=function(n){N(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(e,a){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(r){r.mappingMethod="linear",r.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=sr[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=sr[1])},t.prototype._resetRange=function(){var e=this.getExtent(),a=this.option.range;!a||a.auto?(e.auto=1,this.option.range=e):Z(a)&&(a[0]>a[1]&&a.reverse(),a[0]=Math.max(a[0],e[0]),a[1]=Math.min(a[1],e[1]))},t.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),b(this.stateList,function(e){var a=this.option.controller[e].symbolSize;a&&a[0]!==a[1]&&(a[0]=a[1]/3)},this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),a=Xr((this.get("range")||[]).slice());return a[0]>e[1]&&(a[0]=e[1]),a[1]>e[1]&&(a[1]=e[1]),a[0]<e[0]&&(a[0]=e[0]),a[1]<e[0]&&(a[1]=e[0]),a},t.prototype.getValueState=function(e){var a=this.option.range,r=this.getExtent();return(a[0]<=r[0]||a[0]<=e)&&(a[1]>=r[1]||e<=a[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var a=[];return this.eachTargetSeries(function(r){var i=[],o=r.getData();o.each(this.getDataDimensionIndex(o),function(s,l){e[0]<=s&&s<=e[1]&&i.push(l)},this),a.push({seriesId:r.id,dataIndex:i})},this),a},t.prototype.getVisualMeta=function(e){var a=lr(this,"outOfRange",this.getExtent()),r=lr(this,"inRange",this.option.range.slice()),i=[];function o(p,h){i.push({value:p,color:e(p,h)})}for(var s=0,l=0,u=r.length,c=a.length;l<c&&(!r.length||a[l]<=r[0]);l++)a[l]<r[s]&&o(a[l],"outOfRange");for(var f=1;s<u;s++,f=0)f&&i.length&&o(r[s],"outOfRange"),o(r[s],"inRange");for(var f=1;l<c;l++)(!r.length||r[r.length-1]<a[l])&&(f&&(i.length&&o(i[i.length-1].value,"outOfRange"),f=0),o(a[l],"outOfRange"));var v=i.length;return{stops:i,outerColors:[v?i[0].color:"transparent",v?i[v-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=Jr(it.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(it);function lr(n,t,e){if(e[0]===e[1])return e.slice();for(var a=200,r=(e[1]-e[0])/a,i=e[0],o=[],s=0;s<=a&&i<e[1];s++)o.push(i),i+=r;return o.push(e[1]),o}const qs=Ks;var Qs=function(n){N(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return t.prototype.init=function(e,a){this.ecModel=e,this.api=a},t.prototype.render=function(e,a,r,i){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,a,r,i)},t.prototype.renderBackground=function(e){var a=this.visualMapModel,r=Oi(a.get("padding")||0),i=e.getBoundingRect();e.add(new Ee({z2:-1,silent:!0,shape:{x:i.x-r[3],y:i.y-r[0],width:i.width+r[3]+r[1],height:i.height+r[0]+r[2]},style:{fill:a.get("backgroundColor"),stroke:a.get("borderColor"),lineWidth:a.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,a,r){r=r||{};var i=r.forceState,o=this.visualMapModel,s={};if(a==="color"){var l=o.get("contentColor");s.color=l}function u(p){return s[p]}function c(p,h){s[p]=h}var f=o.controllerVisuals[i||o.getValueState(e)],v=X.prepareVisualTypes(f);return b(v,function(p){var h=f[p];r.convertOpacityToAlpha&&p==="opacity"&&(p="colorAlpha",h=f.__alphaForOpacity),X.dependsOn(p,a)&&h&&h.applyVisual(e,u,c)}),s[a]},t.prototype.positionGroup=function(e){var a=this.visualMapModel,r=this.api;Fi(e,a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})},t.prototype.doRender=function(e,a,r,i){},t.type="visualMap",t}(Yr);const bn=Qs;var ur=[["left","right","width"],["top","bottom","height"]];function Sn(n,t,e){var a=n.option,r=a.align;if(r!=null&&r!=="auto")return r;for(var i={width:t.getWidth(),height:t.getHeight()},o=a.orient==="horizontal"?1:0,s=ur[o],l=[0,null,10],u={},c=0;c<3;c++)u[ur[1-o][c]]=l[c],u[s[c]]=c===2?e[0]:a[s[c]];var f=[["x","width",3],["y","height",0]][o],v=Nt(u,i,a.padding);return s[(v.margin[f[2]]||0)+v[f[0]]+v[f[1]]*.5<i[f[1]]*.5?0:1]}function Qe(n,t){return b(n||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")}),n}var te=ce,el=b,cr=Math.min,Dt=Math.max,tl=12,al=6,rl=function(n){N(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return t.prototype.doRender=function(e,a,r,i){this._api=r,(!i||i.type!=="selectDataRange"||i.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,a=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(a);var r=e.get("text");this._renderEndsText(a,r,0),this._renderEndsText(a,r,1),this._updateView(!0),this.renderBackground(a),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(a)},t.prototype._renderEndsText=function(e,a,r){if(a){var i=a[1-r];i=i!=null?i+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,r===0?-s:l[1]+s],u),f=this._applyTransform(r===0?"bottom":"top",u),v=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new Ce({style:Ke(p,{x:c[0],y:c[1],verticalAlign:v==="horizontal"?"middle":f,align:v==="horizontal"?f:"center",text:i})}))}},t.prototype._renderBar=function(e){var a=this.visualMapModel,r=this._shapes,i=a.itemSize,o=this._orient,s=this._useHandle,l=Sn(a,this.api,i),u=r.mainGroup=this._createBarGroup(l),c=new Y;u.add(c),c.add(r.outOfRange=fr()),c.add(r.inRange=fr(null,s?vr(this._orient):null,z(this._dragHandle,this,"all",!1),z(this._dragHandle,this,"all",!0))),c.setClipPath(new Ee({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var f=a.textStyleModel.getTextRect("国"),v=Dt(f.width,f.height);s&&(r.handleThumbs=[],r.handleLabels=[],r.handleLabelPoints=[],this._createHandle(a,u,0,i,v,o),this._createHandle(a,u,1,i,v,o)),this._createIndicator(a,u,i,v,o),e.add(u)},t.prototype._createHandle=function(e,a,r,i,o,s){var l=z(this._dragHandle,this,r,!1),u=z(this._dragHandle,this,r,!0),c=ma(e.get("handleSize"),i[0]),f=tt(e.get("handleIcon"),-c/2,-c/2,c,c,null,!0),v=vr(this._orient);f.attr({cursor:v,draggable:!0,drift:l,ondragend:u,onmousemove:function(_){ke(_.event)}}),f.x=i[0]/2,f.useStyle(e.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),Gi(f,!0),a.add(f);var p=this.visualMapModel.textStyleModel,h=new Ce({cursor:v,draggable:!0,drift:l,onmousemove:function(_){ke(_.event)},ondragend:u,style:Ke(p,{x:0,y:0,text:""})});h.ensureState("blur").style={opacity:.1},h.stateTransition={duration:200},this.group.add(h);var g=[c,0],d=this._shapes;d.handleThumbs[r]=f,d.handleLabelPoints[r]=g,d.handleLabels[r]=h},t.prototype._createIndicator=function(e,a,r,i,o){var s=ma(e.get("indicatorSize"),r[0]),l=tt(e.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:r[0]/2});var u=e.getModel("indicatorStyle").getItemStyle();if(l instanceof kr){var c=l.style;l.useStyle(K({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);a.add(l);var f=this.visualMapModel.textStyleModel,v=new Ce({silent:!0,invisible:!0,style:Ke(f,{x:0,y:0,text:""})});this.group.add(v);var p=[(o==="horizontal"?i/2:al)+r[0]/2,0],h=this._shapes;h.indicator=l,h.indicatorLabel=v,h.indicatorLabelPoint=p,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,a,r,i){if(this._useHandle){if(this._dragging=!a,!a){var o=this._applyTransform([r,i],this._shapes.mainGroup,!0);this._updateInterval(e,o[1]),this._hideIndicator(),this._updateView()}a===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),a?!this._hovering&&this._clearHoverLinkToSeries():pr(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,a=this._dataInterval=e.getSelected(),r=e.getExtent(),i=[0,e.itemSize[1]];this._handleEnds=[te(a[0],r,i,!0),te(a[1],r,i,!0)]},t.prototype._updateInterval=function(e,a){a=a||0;var r=this.visualMapModel,i=this._handleEnds,o=[0,r.itemSize[1]];Hs(a,i,o,e,0);var s=r.getExtent();this._dataInterval=[te(i[0],o,s,!0),te(i[1],o,s,!0)]},t.prototype._updateView=function(e){var a=this.visualMapModel,r=a.getExtent(),i=this._shapes,o=[0,a.itemSize[1]],s=e?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,r,s,"inRange"),u=this._createBarVisual(r,r,o,"outOfRange");i.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),i.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(e,a,r,i){var o={forceState:i,convertOpacityToAlpha:!0},s=this._makeColorGradient(e,o),l=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],u=this._createBarPoints(r,l);return{barColor:new Er(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(e,a){var r=100,i=[],o=(e[1]-e[0])/r;i.push({color:this.getControllerVisual(e[0],"color",a),offset:0});for(var s=1;s<r;s++){var l=e[0]+o*s;if(l>e[1])break;i.push({color:this.getControllerVisual(l,"color",a),offset:s/r})}return i.push({color:this.getControllerVisual(e[1],"color",a),offset:1}),i},t.prototype._createBarPoints=function(e,a){var r=this.visualMapModel.itemSize;return[[r[0]-a[0],e[0]],[r[0],e[0]],[r[0],e[1]],[r[0]-a[1],e[1]]]},t.prototype._createBarGroup=function(e){var a=this._orient,r=this.visualMapModel.get("inverse");return new Y(a==="horizontal"&&!r?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:a==="horizontal"&&r?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:a==="vertical"&&!r?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},t.prototype._updateHandle=function(e,a){if(this._useHandle){var r=this._shapes,i=this.visualMapModel,o=r.handleThumbs,s=r.handleLabels,l=i.itemSize,u=i.getExtent();el([0,1],function(c){var f=o[c];f.setStyle("fill",a.handlesColor[c]),f.y=e[c];var v=te(e[c],[0,l[1]],u,!0),p=this.getControllerVisual(v,"symbolSize");f.scaleX=f.scaleY=p/l[0],f.x=l[0]-p/2;var h=gt(r.handleLabelPoints[c],mt(f,this.group));s[c].setStyle({x:h[0],y:h[1],text:i.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",r.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(e,a,r,i){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(f){f.attr("invisible",!1);var v={convertOpacityToAlpha:!0},p=this.getControllerVisual(e,"color",v),h=this.getControllerVisual(e,"symbolSize"),g=te(e,s,u,!0),d=l[0]-h/2,_={x:f.x,y:f.y};f.y=g,f.x=d;var w=gt(c.indicatorLabelPoint,mt(f,this.group)),S=c.indicatorLabel;S.attr("invisible",!1);var M=this._applyTransform("left",c.mainGroup),x=this._orient,T=x==="horizontal";S.setStyle({text:(r||"")+o.formatValueText(a),verticalAlign:T?M:"middle",align:T?"center":M});var V={x:d,y:g,style:{fill:p}},D={style:{x:w[0],y:w[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var C={duration:100,easing:"cubicInOut",additive:!0};f.x=_.x,f.y=_.y,f.animateTo(V,C),S.animateTo(D,C)}else f.attr(V),S.attr(D);this._firstShowIndicator=!1;var I=this._shapes.handleLabels;if(I)for(var G=0;G<I.length;G++)this._api.enterBlur(I[G])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(a){if(e._hovering=!0,!e._dragging){var r=e.visualMapModel.itemSize,i=e._applyTransform([a.offsetX,a.offsetY],e._shapes.mainGroup,!0,!0);i[1]=cr(Dt(0,i[1]),r[1]),e._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=r[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,a){var r=this.visualMapModel,i=r.itemSize;if(r.option.hoverLink){var o=[0,i[1]],s=r.getExtent();e=cr(Dt(o[0],e),o[1]);var l=nl(r,s,o),u=[e-l,e+l],c=te(e,o,s,!0),f=[te(u[0],o,s,!0),te(u[1],o,s,!0)];u[0]<o[0]&&(f[0]=-1/0),u[1]>o[1]&&(f[1]=1/0),a&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c,"≈ ",l));var v=this._hoverLinkDataIndices,p=[];(a||pr(r))&&(p=this._hoverLinkDataIndices=r.findTargetDataIndices(f));var h=ki(v,p);this._dispatchHighDown("downplay",Qe(h[0],r)),this._dispatchHighDown("highlight",Qe(h[1],r))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var a;if(jr(e.target,function(l){var u=et(l);if(u.dataIndex!=null)return a=u,!0},!0),!!a){var r=this.ecModel.getSeriesByIndex(a.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(r)){var o=r.getData(a.dataType),s=o.getStore().get(i.getDataDimensionIndex(o),a.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var a=this._shapes.handleLabels;if(a)for(var r=0;r<a.length;r++)this._api.leaveBlur(a[r])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Qe(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,a,r,i){var o=mt(a,i?null:this.group);return Z(e)?gt(e,o,r):Ei(e,o,r)},t.prototype._dispatchHighDown=function(e,a){a&&a.length&&this.api.dispatchAction({type:e,batch:a})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(bn);function fr(n,t,e,a){return new Yt({shape:{points:n},draggable:!!e,cursor:t,drift:e,onmousemove:function(r){ke(r.event)},ondragend:a})}function nl(n,t,e){var a=tl/2,r=n.get("hoverLinkDataSize");return r&&(a=te(r,t,e,!0)/2),a}function pr(n){var t=n.get("hoverLinkOnHandle");return!!(t==null?n.get("realtime"):t)}function vr(n){return n==="vertical"?"ns-resize":"ew-resize"}const il=rl;var ol={type:"selectDataRange",event:"dataRangeSelected",update:"update"},sl=function(n,t){t.eachComponent({mainType:"visualMap",query:n},function(e){e.setSelected(n.selected)})},ll=[{createOnAllSeries:!0,reset:function(n,t){var e=[];return t.eachComponent("visualMap",function(a){var r=n.pipelineContext;!a.isTargetSeries(n)||r&&r.large||e.push(Bs(a.stateList,a.targetVisuals,z(a.getValueState,a),a.getDataDimensionIndex(n.getData())))}),e}},{createOnAllSeries:!0,reset:function(n,t){var e=n.getData(),a=[];t.eachComponent("visualMap",function(r){if(r.isTargetSeries(n)){var i=r.getVisualMeta(z(ul,null,n,r))||{stops:[],outerColors:[]},o=r.getDataDimensionIndex(e);o>=0&&(i.dimension=o,a.push(i))}}),n.getData().setVisual("visualMeta",a)}}];function ul(n,t,e,a){for(var r=t.targetVisuals[a],i=X.prepareVisualTypes(r),o={color:zi(n.getData(),"color")},s=0,l=i.length;s<l;s++){var u=i[s],c=r[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(e,f,v)}return o.color;function f(p){return o[p]}function v(p,h){o[p]=h}}var hr=b;function cl(n){var t=n&&n.visualMap;Z(t)||(t=t?[t]:[]),hr(t,function(e){if(e){Te(e,"splitList")&&!Te(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var a=e.pieces;a&&Z(a)&&hr(a,function(r){de(r)&&(Te(r,"start")&&!Te(r,"min")&&(r.min=r.start),Te(r,"end")&&!Te(r,"max")&&(r.max=r.end))})}})}function Te(n,t){return n&&n.hasOwnProperty&&n.hasOwnProperty(t)}var dr=!1;function wn(n){dr||(dr=!0,n.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),n.registerAction(ol,sl),b(ll,function(t){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,t)}),n.registerPreprocessor(cl))}function fl(n){n.registerComponentModel(qs),n.registerComponentView(il),wn(n)}var pl=function(n){N(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._pieceList=[],e}return t.prototype.optionUpdated=function(e,a){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var r=this._mode=this._determineMode();this._pieceList=[],vl[this._mode].call(this,this._pieceList),this._resetSelected(e,a);var i=this.option.categories;this.resetVisual(function(o,s){r==="categories"?(o.mappingMethod="category",o.categories=Q(i)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=se(this._pieceList,function(l){return l=Q(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var e=this.option,a={},r=X.listVisualTypes(),i=this.isCategory();b(e.pieces,function(s){b(r,function(l){s.hasOwnProperty(l)&&(a[l]=1)})}),b(a,function(s,l){var u=!1;b(this.stateList,function(c){u=u||o(e,c,l)||o(e.target,c,l)},this),!u&&b(this.stateList,function(c){(e[c]||(e[c]={}))[l]=_n.get(l,c==="inRange"?"active":"inactive",i)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}n.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,a){var r=this.option,i=this._pieceList,o=(a?r:e).selected||{};if(r.selected=o,b(i,function(l,u){var c=this.getSelectedMapKey(l);o.hasOwnProperty(c)||(o[c]=!0)},this),r.selectedMode==="single"){var s=!1;b(i,function(l,u){var c=this.getSelectedMapKey(l);o[c]&&(s?o[c]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=Q(e)},t.prototype.getValueState=function(e){var a=X.findPieceIndex(e,this._pieceList);return a!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[a])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var a=[],r=this._pieceList;return this.eachTargetSeries(function(i){var o=[],s=i.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=X.findPieceIndex(l,r);c===e&&o.push(u)},this),a.push({seriesId:i.id,dataIndex:o})},this),a},t.prototype.getRepresentValue=function(e){var a;if(this.isCategory())a=e.value;else if(e.value!=null)a=e.value;else{var r=e.interval||[];a=r[0]===-1/0&&r[1]===1/0?0:(r[0]+r[1])/2}return a},t.prototype.getVisualMeta=function(e){if(this.isCategory())return;var a=[],r=["",""],i=this;function o(c,f){var v=i.getRepresentValue({interval:c});f||(f=i.getValueState(v));var p=e(v,f);c[0]===-1/0?r[0]=p:c[1]===1/0?r[1]=p:a.push({value:c[0],color:p},{value:c[1],color:p})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return b(s,function(c){var f=c.interval;f&&(f[0]>u&&o([u,f[0]],"outOfRange"),o(f.slice()),u=f[1])},this),{stops:a,outerColors:r}},t.type="visualMap.piecewise",t.defaultOption=Jr(it.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(it),vl={splitNumber:function(n){var t=this.option,e=Math.min(t.precision,20),a=this.getExtent(),r=t.splitNumber;r=Math.max(parseInt(r,10),1),t.splitNumber=r;for(var i=(a[1]-a[0])/r;+i.toFixed(e)!==i&&e<5;)e++;t.precision=e,i=+i.toFixed(e),t.minOpen&&n.push({interval:[-1/0,a[0]],close:[0,0]});for(var o=0,s=a[0];o<r;s+=i,o++){var l=o===r-1?a[1]:s+i;n.push({interval:[s,l],close:[1,1]})}t.maxOpen&&n.push({interval:[a[1],1/0],close:[0,0]}),ya(n),b(n,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(n){var t=this.option;b(t.categories,function(e){n.push({text:this.formatValueText(e,!0),value:e})},this),gr(t,n)},pieces:function(n){var t=this.option;b(t.pieces,function(e,a){de(e)||(e={value:e});var r={text:"",index:a};if(e.label!=null&&(r.text=e.label),e.hasOwnProperty("value")){var i=r.value=e.value;r.interval=[i,i],r.close=[1,1]}else{for(var o=r.interval=[],s=r.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var v=[["gte","gt","min"],["lte","lt","max"]][f],p=0;p<3&&o[f]==null;p++)o[f]=e[v[p]],s[f]=l[p],c[f]=p===2;o[f]==null&&(o[f]=u[f])}c[0]&&o[1]===1/0&&(s[0]=0),c[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(r.value=o[0])}r.visual=X.retrieveVisuals(e),n.push(r)},this),gr(t,n),ya(n),b(n,function(e){var a=e.close,r=[["<","≤"][a[1]],[">","≥"][a[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,r)},this)}};function gr(n,t){var e=n.inverse;(n.orient==="vertical"?!e:e)&&t.reverse()}const hl=pl;var dl=function(n){N(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.doRender=function(){var e=this.group;e.removeAll();var a=this.visualMapModel,r=a.get("textGap"),i=a.textStyleModel,o=i.getFont(),s=i.getTextColor(),l=this._getItemAlign(),u=a.itemSize,c=this._getViewData(),f=c.endsText,v=$r(a.get("showLabel",!0),!f);f&&this._renderEndsText(e,f[0],u,v,l),b(c.viewPieceList,function(p){var h=p.piece,g=new Y;g.onclick=z(this._onItemClick,this,h),this._enableHoverLink(g,p.indexInModelPieceList);var d=a.getRepresentValue(h);if(this._createItemSymbol(g,d,[0,0,u[0],u[1]]),v){var _=this.visualMapModel.getValueState(d);g.add(new Ce({style:{x:l==="right"?-r:u[0]+r,y:u[1]/2,text:h.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:_==="outOfRange"?.5:1}}))}e.add(g)},this),f&&this._renderEndsText(e,f[1],u,v,l),Ni(a.get("orient"),e,a.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,a){var r=this;e.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(o){var s=r.visualMapModel;s.option.hoverLink&&r.api.dispatchAction({type:o,batch:Qe(s.findTargetDataIndices(a),s)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,a=e.option;if(a.orient==="vertical")return Sn(e,this.api,e.itemSize);var r=a.align;return(!r||r==="auto")&&(r="left"),r},t.prototype._renderEndsText=function(e,a,r,i,o){if(a){var s=new Y,l=this.visualMapModel.textStyleModel;s.add(new Ce({style:Ke(l,{x:i?o==="right"?r[0]:0:r[0]/2,y:r[1]/2,verticalAlign:"middle",align:i?o:"center",text:a})})),e.add(s)}},t.prototype._getViewData=function(){var e=this.visualMapModel,a=se(e.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),r=e.get("text"),i=e.get("orient"),o=e.get("inverse");return(i==="horizontal"?o:!o)?a.reverse():r&&(r=r.slice().reverse()),{viewPieceList:a,endsText:r}},t.prototype._createItemSymbol=function(e,a,r){e.add(tt(this.getControllerVisual(a,"symbol"),r[0],r[1],r[2],r[3],this.getControllerVisual(a,"color")))},t.prototype._onItemClick=function(e){var a=this.visualMapModel,r=a.option,i=r.selectedMode;if(i){var o=Q(r.selected),s=a.getSelectedMapKey(e);i==="single"||i===!0?(o[s]=!0,b(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},t.type="visualMap.piecewise",t}(bn);const gl=dl;function ml(n){n.registerComponentModel(hl),n.registerComponentView(gl),wn(n)}function yl(n){Ne(fl),Ne(ml)}const ee=n=>(ot("data-v-4ec107c4"),n=n(),st(),n),_l=ee(()=>y("h1",{class:"monitor-count-card-num"},"21.2 k",-1)),bl=ee(()=>y("div",{class:"monitor-count-card-text"},"总访问人数",-1)),Sl=ee(()=>y("h1",{class:"monitor-count-card-num"},"1.6 k",-1)),wl=ee(()=>y("div",{class:"monitor-count-card-text"},"点击量（近30天）",-1)),Ml={class:"monitor-count-card-trend ele-text-success"},xl=ee(()=>y("span",null,"110.5%",-1)),Tl=ee(()=>y("h1",{class:"monitor-count-card-num"},"826.0",-1)),Dl=ee(()=>y("div",{class:"monitor-count-card-text"},"到达量（近30天）",-1)),Cl={class:"monitor-count-card-trend ele-text-danger"},Vl=ee(()=>y("span",null,"15.5%",-1)),Ll=ee(()=>y("h1",{class:"monitor-count-card-num"},"28.8 %",-1)),Al=ee(()=>y("div",{class:"monitor-count-card-text"},"转化率（近30天）",-1)),Il={class:"monitor-count-card-trend ele-text-success"},Rl=ee(()=>y("span",null,"65.8%",-1)),Pl={__name:"statistics-card",setup(n){const t=oe([{key:1,name:"SunSmile",avatar:"https://cdn.eleadmin.com/20200609/c184eef391ae48dba87e3057e70238fb.jpg"},{key:2,name:"你的名字很好听",avatar:"https://cdn.eleadmin.com/20200609/b6a811873e704db49db994053a5019b2.jpg"},{key:3,name:"全村人的希望",avatar:"https://cdn.eleadmin.com/20200609/948344a2a77c47a7a7b332fe12ff749a.jpg"},{key:4,name:"Jasmine",avatar:"https://cdn.eleadmin.com/20200609/f6bc05af944a4f738b54128717952107.jpg"},{key:5,name:"酷酷的大叔",avatar:"https://cdn.eleadmin.com/20200609/2d98970a51b34b6b859339c96b240dcd.jpg"},{key:6,name:"管理员",avatar:"https://cdn.eleadmin.com/20200610/avatar.jpg"}]);return(e,a)=>{const r=Bn,i=$n,o=me,s=kt,l=br,u=Et;return ae(),ge(u,{gutter:16},{default:A(()=>[m(s,{lg:6,md:12,sm:12,xs:24},{default:A(()=>[m(o,{bordered:!1,class:"monitor-count-card"},{default:A(()=>[m(r,{color:"blue",shape:"circle",size:"large"},{default:A(()=>[m($(no))]),_:1}),_l,bl,m(i,{data:t.value,size:"small",max:4},null,8,["data"])]),_:1})]),_:1}),m(s,{lg:6,md:12,sm:12,xs:24},{default:A(()=>[m(o,{bordered:!1,class:"monitor-count-card"},{default:A(()=>[m(r,{color:"orange",shape:"circle",size:"large"},{default:A(()=>[m($(lo))]),_:1}),Sl,wl,y("div",Ml,[m($(ua)),xl]),m(l,{title:"指标说明"},{default:A(()=>[m($(sa),{class:"monitor-count-card-tips"})]),_:1})]),_:1})]),_:1}),m(s,{lg:6,md:12,sm:12,xs:24},{default:A(()=>[m(o,{bordered:!1,class:"monitor-count-card"},{default:A(()=>[m(r,{color:"red",shape:"circle",size:"large"},{default:A(()=>[m($(po))]),_:1}),Tl,Dl,y("div",Cl,[m($(kn)),Vl])]),_:1})]),_:1}),m(s,{lg:6,md:12,sm:12,xs:24},{default:A(()=>[m(o,{bordered:!1,class:"monitor-count-card"},{default:A(()=>[m(r,{color:"green",shape:"circle",size:"large"},{default:A(()=>[m($(mo))]),_:1}),Ll,Al,y("div",Il,[m($(ua)),Rl]),m(l,{title:"指标说明"},{default:A(()=>[m($(sa),{class:"monitor-count-card-tips"})]),_:1})]),_:1})]),_:1})]),_:1})}}},Ol=Ve(Pl,[["__scopeId","data-v-4ec107c4"]]),Fl="/";async function Gl(){const n=await Gt.get(Fl+"json/china-provinces.geo.json",{baseURL:""});return n.data?n.data:Promise.reject(new Error("获取地图数据失败"))}async function kl(){const n=await Gt.get("https://cdn.eleadmin.com/20200610/monitor-user-count.json");return n.data.code===0&&n.data.data?n.data.data:Promise.reject(new Error(n.data.message))}async function El(){const n=await Gt.get("https://cdn.eleadmin.com/20200610/monitor-browser-count.json");return n.data.code===0&&n.data.data?n.data.data:Promise.reject(new Error(n.data.message))}const zl={class:"ele-cell-content"},Nl={__name:"map-card",setup(n){Ne([Zr,Gs,yl,mn,Wr]);const t=oe(null);Kr([t]);const e=oe([]),a=Ft({}),r=()=>{Gl().then(o=>{Hi("china",o),i()}).catch(o=>{Lt.error(o.message)})},i=()=>{kl().then(o=>{const s=o.sort((f,v)=>v.value-f.value),l=s[s.length-1].value||0,u=s[0].value||1,c=s.length>10?s.slice(0,15):s;e.value=c.map(f=>({name:f.name,value:f.value,percent:f.value/u*100})),Object.assign(a,{tooltip:{trigger:"item",borderWidth:1},visualMap:{min:l,max:u,text:["高","低"],calculable:!0},series:[{name:"用户数",label:{show:!0},type:"map",map:"china",data:o}]})}).catch(o=>{Lt.error(o.message)})};return r(),(o,s)=>{const l=kt,u=zt,c=Et,f=me;return ae(),ge(f,{bordered:!1,title:"用户分布"},{default:A(()=>[m(c,null,{default:A(()=>[m(l,{sm:18,xs:24},{default:A(()=>[m($(qr),{ref_key:"userCountMapChartRef",ref:t,option:a,style:{height:"469px"}},null,8,["option"])]),_:1}),m(l,{sm:6,xs:24},{default:A(()=>[(ae(!0),Ct(En,null,zn(e.value,v=>(ae(),Ct("div",{key:v.name,class:"monitor-user-count-item ele-cell"},[y("div",null,Vt(v.name),1),y("div",zl,[m(u,{status:"normal","show-info":!1,percent:v.percent},null,8,["percent"])]),y("div",null,Vt(v.value),1)]))),128))]),_:1})]),_:1})]),_:1})}}},Hl=Ve(Nl,[["__scopeId","data-v-2ed8eaa8"]]);const $l=n=>(ot("data-v-5a4e8a3c"),n=n(),st(),n),Bl={class:"monitor-online-num-card"},Ul={class:"monitor-online-num-title"},jl=$l(()=>y("div",{class:"monitor-online-num-text"},"在线总人数",-1)),Yl={__name:"online-num",setup(n){let t=null;const e=oe(10),a=oe(la(new Date,"HH:mm:ss")),r=oe(228),i=yr(()=>e.value+" 秒后更新"),o=()=>{t=window.setInterval(()=>{a.value=la(new Date,"HH:mm:ss"),e.value===1?(e.value=10,r.value=100+Math.round(Math.random()*900)):e.value--},1e3)};return Nn(()=>{t&&(clearInterval(t),t=null)}),o(),(s,l)=>{const u=Bi,c=Sr,f=me;return ae(),ge(f,{bordered:!1,title:"在线人数"},{default:A(()=>[y("div",Bl,[y("div",null,Vt(a.value),1),y("div",Ul,[m(u,{"end-val":r.value},null,8,["end-val"])]),jl,m(c,{status:"processing",text:i.value},null,8,["text"])])]),_:1})}}},Xl=Ve(Yl,[["__scopeId","data-v-5a4e8a3c"]]),Jl={__name:"browser-card",setup(n){Ne([Zr,Eo,Wr,$i]);const t=oe(null);Kr([t]);const e=Ft({});return(()=>{El().then(r=>{Object.assign(e,{tooltip:{trigger:"item",confine:!0,borderWidth:1},legend:{bottom:5,itemWidth:10,itemHeight:10,icon:"circle",data:r.map(i=>i.name)},series:[{type:"pie",radius:["45%","70%"],center:["50%","43%"],label:{show:!1},data:r}]})}).catch(r=>{Lt.error(r.message)})})(),(r,i)=>{const o=me;return ae(),ge(o,{bordered:!1,title:"浏览器分布","body-style":{padding:"0px"}},{default:A(()=>[m($(qr),{ref_key:"browserChartRef",ref:t,option:e,style:{height:"222px"}},null,8,["option"])]),_:1})}}};const fe=n=>(ot("data-v-fd21c581"),n=n(),st(),n),Zl={class:"ele-cell ele-cell-align-bottom"},Wl=fe(()=>y("div",{style:{"font-size":"51px","line-height":"1"}},"4.5",-1)),Kl={class:"ele-cell-content"},ql=fe(()=>y("span",{style:{color:"#fadb14","margin-left":"8px"}},"很棒",-1)),Ql=fe(()=>y("div",{class:"ele-cell",style:{margin:"18px 0"}},[y("div",{style:{"font-size":"28px","line-height":"1"},class:"ele-text-placeholder"}," -0% "),y("div",{class:"ele-cell-content ele-text-small ele-text-secondary"}," 当前没有评价波动 ")],-1)),eu={class:"ele-cell"},tu={class:"ele-cell-content"},au={class:"monitor-evaluate-text"},ru=fe(()=>y("span",null,"5 : 368 人",-1)),nu={class:"ele-cell"},iu={class:"ele-cell-content"},ou={class:"monitor-evaluate-text"},su=fe(()=>y("span",null,"4 : 256 人",-1)),lu={class:"ele-cell"},uu={class:"ele-cell-content"},cu={class:"monitor-evaluate-text"},fu=fe(()=>y("span",null,"3 : 49 人",-1)),pu={class:"ele-cell"},vu={class:"ele-cell-content"},hu={class:"monitor-evaluate-text"},du=fe(()=>y("span",null,"2 : 14 人",-1)),gu={class:"ele-cell"},mu={class:"ele-cell-content"},yu={class:"monitor-evaluate-text"},_u=fe(()=>y("span",null,"1 : 0 人",-1)),bu={__name:"user-rate",setup(n){const t=oe(4.5);return(e,a)=>{const r=eo,i=zt,o=me;return ae(),ge(o,{bordered:!1,title:"用户评价"},{default:A(()=>[y("div",Zl,[Wl,y("div",Kl,[m(r,{value:t.value,disabled:""},null,8,["value"]),ql])]),Ql,y("div",eu,[y("div",tu,[m(i,{percent:60,"stroke-color":"#52c41a","show-info":!1})]),y("div",au,[m($(De)),ru])]),y("div",nu,[y("div",iu,[m(i,{percent:40,"stroke-color":"#1890ff","show-info":!1})]),y("div",ou,[m($(De)),su])]),y("div",lu,[y("div",uu,[m(i,{percent:20,"stroke-color":"#faad14","show-info":!1})]),y("div",cu,[m($(De)),fu])]),y("div",pu,[y("div",vu,[m(i,{percent:10,"stroke-color":"#f5222d","show-info":!1})]),y("div",hu,[m($(De)),du])]),y("div",gu,[y("div",mu,[m(i,{percent:0,"show-info":!1})]),y("div",yu,[m($(De)),_u])])]),_:1})}}},Su=Ve(bu,[["__scopeId","data-v-fd21c581"]]);const wu={},Mn=n=>(ot("data-v-ab0606d5"),n=n(),st(),n),Mu=Mn(()=>y("div",{class:"ele-cell ele-text-center"},[y("div",{class:"ele-cell-content",style:{"font-size":"24px"}},"856"),y("div",{class:"ele-cell-content"},[y("div",{class:"monitor-face-smile"},[y("i")]),y("div",{class:"ele-text-secondary ele-elip",style:{"margin-top":"8px"}}," 正面评论 ")]),y("h2",{class:"ele-cell-content ele-text-success"},"82%")],-1)),xu=Mn(()=>y("div",{class:"ele-cell ele-text-center"},[y("div",{class:"ele-cell-content",style:{"font-size":"24px"}},"60"),y("div",{class:"ele-cell-content"},[y("div",{class:"monitor-face-cry"},[y("i")]),y("div",{class:"ele-text-secondary ele-elip",style:{"margin-top":"8px"}}," 负面评论 ")]),y("h2",{class:"ele-cell-content ele-text-danger"},"9%")],-1));function Tu(n,t){const e=Hn,a=me;return ae(),ge(a,{bordered:!1,title:"用户满意度"},{default:A(()=>[Mu,m(e,{style:{margin:"26px 0"}}),xu]),_:1})}const Du=Ve(wu,[["render",Tu],["__scopeId","data-v-ab0606d5"]]);const Cu={},Vu={class:"ele-cell"},Lu={class:"ele-cell-content ele-text-center"},Au={class:"monitor-progress-group"},Iu={class:"monitor-progress-legends"},Ru={class:"ele-text-small ele-elip"},Pu={class:"ele-text-small ele-elip"},Ou={class:"ele-text-small ele-elip"};function Fu(n,t){const e=zt,a=Sr,r=me;return ae(),ge(r,{bordered:!1,title:"用户活跃度","body-style":{padding:"56px 0"}},{default:A(()=>[y("div",Vu,[y("div",Lu,[y("div",Au,[m(e,{type:"circle",percent:70,"stroke-color":"#52c41a","show-info":!1,width:161}),m(e,{type:"circle",percent:60,"stroke-color":"#1890ff","show-info":!1,width:121,"stroke-width":5}),m(e,{type:"circle",percent:35,"stroke-color":"#f5222d","show-info":!1,width:91,"stroke-width":4})])]),y("div",Iu,[y("div",Ru,[m(a,{color:"green",text:"活跃率: 70%"})]),y("div",Pu,[m(a,{color:"blue",text:"留存率: 60%"})]),y("div",Ou,[m(a,{color:"red",text:"跳出率: 35%"})])])])]),_:1})}const Gu=Ve(Cu,[["render",Fu],["__scopeId","data-v-1baf968d"]]),ku={class:"ele-body ele-body-card"},Eu={name:"DashboardMonitor"},Ju=Object.assign(Eu,{setup(n){return(t,e)=>{const a=kt,r=Et;return ae(),Ct("div",ku,[m(Ol),m(r,{gutter:16},{default:A(()=>[m(a,{lg:18,md:24,sm:24,xs:24},{default:A(()=>[m(Hl)]),_:1}),m(a,{lg:6,md:24,sm:24,xs:24},{default:A(()=>[m(r,{gutter:16},{default:A(()=>[m(a,{lg:24,md:12,sm:12,xs:24},{default:A(()=>[m(Xl)]),_:1}),m(a,{lg:24,md:12,sm:12,xs:24},{default:A(()=>[m(Jl)]),_:1})]),_:1})]),_:1})]),_:1}),m(r,{gutter:16},{default:A(()=>[m(a,{xl:12,lg:24,md:24,sm:24,xs:24},{default:A(()=>[m(Su)]),_:1}),m(a,{xl:6,lg:12,md:12,sm:12,xs:24},{default:A(()=>[m(Du)]),_:1}),m(a,{xl:6,lg:12,md:12,sm:12,xs:24},{default:A(()=>[m(Gu)]),_:1})]),_:1})])}}});export{Ju as default};
